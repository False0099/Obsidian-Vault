## 流程：
第一步：**买一个支持监听功能的网卡**。需要至少 30-3000 不等的人民币，并将它配置到我们的虚拟机环境下，如果我们是我们的虚拟机环境，我们还需要把下面的图片打开，以把我们的外部的网卡移动到虚拟机内部：
![[Pasted image 20240924135008.png]]



第二步：在 Linux 环境下安装我们的 air-crackng。具体的安装指令如下：
```shell
sudo apt-get update
sudo apt-get install aircrack-ng
```

安装成功后，我们可以通过
```
air-crackng -help
```
来检查我们的程序是否已经安装成功

第三步：我们找到我们的对应的网卡，我们可以通过我们的 `iwconfig` 来检查我们的对应的网卡是否安装成功，如果安装成功，会出现对应的信息。
![[Pasted image 20240924135358.png]]

这里，我们的网卡就是我们的 wlx7 cd 907 e 7030，后面的相关参数我们也可以进行对应的解读：
IEEE 802.11  - 表示该无线网卡支持 IEEE 802.11 标准，即 Wi-Fi 标准。
**ESSID** ：即我们的当前网卡连接我们的外部 wifi 的 WiFi
名称是什么，`ff/any` 表示该无线网卡没有连接到任何特定的无线网络，或者没有设置特定的 SSID。

Mode: 表示我们当前网卡的工作模式：

**Access Point** 表示无线网卡当前连接的接入点。 `Not-Associated` 表示该无线网卡没有连接到任何接入点。

**Tx-Power=20 dBm**:    - **Tx-Power** 表示无线网卡的发射功率。- `20 dBm` 是发射功率的单位，表示 20 毫瓦（mW）。

**Retry short long limit** 表示重试的短长限制。
- `2` 表示在发送数据包失败时，无线网卡会尝试重发数据包的次数。
- **Fragment thr**（Fragmentation threshold）表示分片阈值。
- `off` 表示该功能被关闭，无线网卡不会将大数据包分片发送。
**Power Management: off**:    
- **Power Management** 表示电源管理模式。
- `off` 表示电源管理功能被关闭，无线网卡不会进入省电模式。

## 切换网卡模式：
我们在我们进行网卡模式切换的时候，可以通过我们的 `sudo airmon-ng start 网卡名称`
![[Pasted image 20240924140134.png]]

如果这一步不能成功，我们可以考虑**换一个网卡**然后从第一步开始重新开始。

## 监听目标网络：
在我们的上一步完成后，我们就可以去进行我们的监听目标网络，我们这一步的目的是，**获取目标网络的**BSSID, 和对应的 channel。

当然，我们的这一步也可以不通过我们的 air-dump 来完成，我们还可以通过我们的属性来获得，![[Pasted image 20240924140440.png]]

其中，我们的网络通道就是我们的对应的网络通道，但是我们的**对应的 BSSID**要怎么获取呢？这个时候，我们就需要通过我们的 aircrack 中的监听模式来实现

```shell
sudo airodump-ng wlan0mon --write 文件名
```

之后，我们就可以获得到我们的下面的内容：
![[Pasted image 20240924140957.png]]

其中，我们的 BSSID，就是我们的基本服务集标识符（Basic Service Set Identifier），即无线接入点（AP）的 MAC 地址。

我们的 channel 就表示了我们的 WIFI 所在的信号频率当中，我们所在的信号通道是多少。

我们的**Privacy**: 就表示了我们的 WIFI 所在的无线网络的加密类型

Ciper 表示我们的加密方式，例如我们的 CCMP

**Authentication**: 表示我们的认证方式，例如我们的 PSK 认证方式。（这一种认证方式我们在后面会再一次提到）

我们的目标，就是找到我们的对应的你需要破解网络的 BSSID 和对应的 CHANNEL，用于我们后续获取我们的信号。

## 获取握手包：
### 原理分析：
在无线网络中，握手包（Handshake Packets）是指在客户端设备（如笔记本电脑、智能手机）与无线接入点（AP，Access Point）之间建立安全连接时所交换的一系列数据包。这些数据包用于协商加密密钥，确保数据传输的安全性。

![[Pasted image 20240924143041.png]]

我们的握手报文一般来说包含了我们的四个内容：
1. 我们的接入点（本次实验中特指我们的热点设备，即我们的手机）向我们的接入点（本次实验中为我们的连接热点的用户，即我们的手机）发送随机数 ANonce,（MSG 1）

2. 我们的客户向我们的接入点发送我们的对应的 Snonce（另一个随机数），和我们的加密的握手消息的 EAPOL-Key 数据包给 AP。(MSG 2)

3. AP 发送一个包含加密的握手消息的 EAPOL-Key 数据包给客户端。（MSG 3）

4. 客户端发送一个确认消息的 EAPOL-Key 数据包给 AP。

其中，我们的用于加密的 KEY，我们叫做**PMK（Pairwise Master Key）**：这是在 WPA/WPA2中，首先通过802.1X 认证获得的密钥，或者在 PSK（Pre-Shared Key）模式下，使用 Wi-Fi 密码生成。

也就是说，我们通过获取我们的握手报文，然后按照我们的协议的规则去构造我们的对应的代码，看我们的返回内容是否正确。然后我们再去通过枚举我们的**密码空间**，一一检验我们的密码是不是我们需要的对应的内容。

### 实战：
在监听模式下，要获取一个握手报文。理论上只要有一个**设备**连接到了我们的目标 WIFI，那么自然就会产生一个设备，这样的方法，就像是姜太公钓鱼，愿者上钩。

我们其实不难看出，这样的方法是不太稳定的，我们转而采用我们的另一种方法，我们攻击者通过**主动断掉别人的连接**，让对面自动重连，然后**同时开启我们的监听模式**，就可以获得我们的对应的握手报文。

我们的对应的攻击方法如下所示：

```
sudo aireplay-ng --deauth 0 -a F2:9E:DD:A1:FD:96 -c EE:71:C5:AD:82:F2 wlan0mon
```

![[0cdfca2cc96a8263d19e1a737eec2b92.png]]

与此同时，我们开启我们的监听，获得我们的数据：最后就能够得到我们的对应的**含有握手报文的内容**。我们记作我们的数据包 3，

通过我们的过滤，我们可以发现我们的这个报文的若干数据：
这些数据就是我们的**握手报文** ![[Pasted image 20240924152506.png]]


## WIFI 破解
接下来，我们需要的就是构造一个字典，然后通过我们的这一个字典来一一检验我们的内容是不是符合我们的要求，关于我们的字典文件，我们可以去 GITHUB 上找一个字典文件，（虽然只包括了经典的弱密码）

我们使用下面的指令：
```
sudo aircrack-ng -w <WORDLIST> -b <AP_BSSID> <FILENAME>-01.cap
```

之后，如果成功，我们就能够获取到我们的对应的 WIFI 密码。（注意，我们的上面的内容可以离线进行）。

![[Pasted image 20240924152828.png]]

## 防范方法：
我们的第一种方法方法是针对于我们的密码的，这一种方法要求我们采用沃恩的强度较高的密码，防止被我们的字典暴力破解得到最终的答案

我们的第二种方法是针对于我们的 AIRCRACK 软件的，我们通过实验发现，如果我们的 AIRCRACK 中使用的是 5 G 频段的无线网络。是不能被我们的用户所检测到的。于是我们据可以通过将我们 WIFI 升级到 5 G 频段从而避免被我们的 AIRCRACK 软件攻击

第三种：我们采用更强的 WPA 3 协议，这一种协议更加安全，更难被破解
