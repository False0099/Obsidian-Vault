## 第九/十章：输出输出（I/O）设备/系统
### 设备控制器（I/O）的基本功能
* 实现主机和外部设备之间的数据传送
* 实现数据缓冲，以达到主机同外部设备之间的**速度匹配**
* 接受主机的命令，提供设备接口的设备，并按照主机的命令控制设备
### I/O 编址方式
* (1) 统一编址：用取数、存数指令
* (2) 不统一编址：有专门的 I/O 指令
### I/O 与主机的连接方式
* 辐射式连接
    * 每台设备都配有一套
    * 控制线路和一组信号线
    * 不便于增删设备
* 总线连接
    * 便于增删设备
### I/O 设备
* 人机交互设备
    * 键盘、鼠标等
* 计算机信息的驻留设备
    * 硬盘、光盘等
* 机——机通信设备
    * MODEN 等
### 为什么要设置接口？
* 1. 实现设备的选择
* 2. 实现数据缓冲达到速度匹配
* 3. 实现数据串并格式转换
* 4. 实现电平转换
* 5. 传送控制命令
* 6. 反映设备的状态
    * （“忙”、“就绪”、“中断请求”）
### 中断服务程序的流程
* (1) 保护现场
    * 程序断点的保护
    * 寄存器内容的保护
* (2) 中断服务
    * 对不同的 I/O 设备具有不同内容的设备服务
* (3) 恢复现场
    * 出栈指令
* (4) 中断返回
    * 中断返回指令
### 单重中断和多重中断
* 单重中断
    * 不允许中断现行的中断服务程序
* 多重中断
    * 允许级别更高的中断源
    * 中断现行的中断服务程序
### DMA 方式
* 主存和 I/O 之间有一条直接数据通道
* CPU 和 I/O 并行工作
* DMA 的三种工作方式
    * (1) CPU 暂停方式
    * (2) CPU 周期窃取方式
    * (3)直接访问存储器
* DMA 接口功能
    * (1) 向 CPU 申请 DMA 传送
    * (2) 处理总线控制权的转交
    * (3) 管理系统总线、控制数据传送
    * (4) 确定数据传送的首地址和长度，修正传送过程中的数据地址和长度
    * (5) DMA 传送结束时，给出操作完成信号
* DMA 传送过程
    * 预处理、数据传送、后处理
### 外设接口
* 设备与主机相连时，必须按照规定的物理互连特性、电气特性等进行连接，这些特性的技术规范称为接口标准