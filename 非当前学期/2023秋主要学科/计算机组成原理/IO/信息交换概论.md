# 信息交换
## 8.2 程序查询方式（数据传输率较低，程序实现）
### 优化 
多态外设的程序查询过程
![[Pasted image 20230801214203.png]]

### 特点：


## 程序中断方式（程序实现）
### 基本概念：
中断指 cpu 暂停现行程序的执行，转去处理随即发生的紧急事件，处理完后再处理。因为中断很常见，所以我们的 CPU 中会内置一个对应的中断
### 中断处理过程 ：
第一步：实现 CPU 和 I/O 的并行处理
第二步：判断我们是否有一个中断？如果没有我们的中断，我们就直接进行我们的下一个操作
第三步：如果有中断，并且此时 CPU 允许中断，而且任务执行完毕后没有其他的任务，那么我们就响应我们的（外）中断（终端周期）
第四步：响应了我们的中断后，**保存我们的中断源**（存储在 PC 当中），**屏蔽我们的其他中断**，转去执行我们的终端服务子程序（利用我们的中断隐指令）
第五步：执行完后，我们返回我们原来的程序。
![[Pasted image 20230801214948.png]]
转中断服务程序：
1. 预先规定中断服务程序的入口地址
2. 获取中断向量，通过查表找到入口地址 ![[Pasted image 20230801215612.png]] ![[Pasted image 20230801215823.png]]
中断方式的基本 I/O 接口
![[Pasted image 20230801220204.png]]

中断处理策略：
单级中断：完成后才进行下一个，不允许中断嵌套 ![[Pasted image 20230801220949.png]]
![[Pasted image 20230801221602.png]]

多级中断
中断嵌套方式
优先级高的中断级可以打断优先级低的中断服务程序，中断服务程序以嵌套方式进行工作
![[Pasted image 20230801222009.png]]

![[Pasted image 20230801222135.png]]
练习：![[Pasted image 20230801222750.png]] ![[Pasted image 20230801222829.png]]
![[Pasted image 20230801222812.png]]
![[Pasted image 20230801223347.png]]


## DMA (直接内存访问) 方式（硬件实现）
1. 完全由硬件实现，数据交换不经过 CPU ![[Pasted image 20230801223654.png]]
### 传送过程
DMA 控制器从 CPU 完全接管对总线的控制，数据交换不经过 CPU，而是在内存和 I/O 设备之间进行，。
![[Pasted image 20230801224212.png]]

![[Pasted image 20230801224223.png]] ![[Pasted image 20230801224235.png]] ![[Pasted image 20230801224245.png]] ![[Pasted image 20230801224255.png]]
![[Pasted image 20230801225712.png]]


## 通道方式
### 基本概念：
通道：一个具有特殊功能的处理器，称为输入输出处理器 (IOP), IOP 可以实现对外围设备的统一管理和外围设备与内存之间的数据传送。与 DMA 方式相比，通道方式进一步提高了 CPU 的效率。但需要更多硬件支持。

## 外围处理机方式
外围处理机 (PPU)方式是通道方式的进一步发展。PPU 基本上独立于主机工作，结构更接近一般处理机，甚至就是微小型计算机。在一些系统中，设置了多台 PPU，分别承担 I/O 控制、通信、维护诊断等任务。从某种意义上说，这种系统已变成分布式的多机系统。



