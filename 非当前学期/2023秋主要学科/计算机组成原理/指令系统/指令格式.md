上一篇：[[非当前学期/2023秋主要学科/计算机组成原理习题/存储器/虚拟存储器]]
下一篇：[[指令寻址]]，[[指令方案]]


**边长指令字时，要留出一个状态给我们的下一位进行扩展。**
我们设计一条指令，需要通知给我们三个信息：
1. 指令功能（做什么）（**操作码**）
2. 指令数据（指令执行的时候需要什么东西，通过地址来给出）（**地址码**）
3. 下一条指令的地址（**地址码**）

## 术语
指令字：机器指令表示为机器字，指令的机器字称为指令字，简称指令。

指令格式：指令字的编码格式，指令字用二进制代码表示的结构形式，由操作码字段和地址码字段组成。
## 指令格式
（1）四地址指令（其中有一个是下地址，一个是写地址）
 
 OP 为操作码。A 1 为第一操作数地址，A 2 为第二操作数地址，A 3 为结果地址，A 4 为下一条指令的地址。
 写作 $(A_{1}OP(A_{2})\to A_{3})$,其中 $A_{4}$ 可任意填写。可直接寻址的地址范围与地址字段的位数有关。如果字长为 32 位 (bit)，操作码 8 位，4 个地址各占 6 位，则指令操作数的直接寻址范围为 $2^6=64$。如果地址字段均指示主存的地址，则完成一条四地址指令，共需访问 4 次存储（取指令，取两个操作数，存放结果） 
 
 （2）三地址指令
 在四地址指令的基础上，隐去了 $A_{4}$ 的地址字段，让程序计数器 PC 代替了他的功效。完成三地址指令，需要访问 4 次存储器。
 
 （3）二地址指令
 如果机器运行过程中，不是每一个结果都要放到主存当中，那么我们就可以进化出二地址指令，即只存 $A_{1}$,第一操作数地址，$A_{2}$,第二操作数地址，不再存放 $A_{3}$。完成一条二地址指令，我们可以只需要访问至少三次（**取指令，读 1，读 2**）至多还是需要四次（**取指令，读，读，写**）

 （4）一地址指令
 把一个操作数的地址隐含在运算器的 ACC 中，就做到了一地址指令。或者只需要对一个地址进行简单操作。**完成一次指令，需要访存 2 次（取指，读）**，或三次（取值，读，写）。
 
 （5）零地址指令
 把操作数的地址完全隐含在堆栈指针 sp 中，
![[Pasted image 20230727221638.png]]
共同点：访问时**不用访问存储器**

## 指令字长度
指令字长度分类可以分为定长指令字和我们的变长指令字。其中我们的定长指令字，制定了我们的 0-1 位数是相等的。而我们的变长指令字中，我们的 0-1 位数是不相等的。

### 定长指令字：
1.定长操作码在指令字的最高位部分分配固定的若干位表示操作码，一般 n 位操作码字段的指令系统最大能表示 $2^n$ 条指令。

2. 变长（扩展）操作码：全部指令的**操作码字段位数不固定**，且分散地放在指令字的不同位置上

计算思路：**我们从 4 地址往下依次使用，没用完的我们就加上地址长度接着给下一个地址指令使用，注意要保留 1111 作为我们的预留地址**。

扩展操作码指令格式：
![[Pasted image 20230727221023.png]]

## 变长操作码设计
要求：**不允许短码是长码的前缀**----（留有 1111 作为我们的标志位）
各个操作码一定不能重复----（）


我们把我们的 `16bit` 分为我们的 4 段，我们每一段中有 `4bit`,然后我们空余出我们的某一个位置，让这个位置表示我们的下一种情况的表示，这个时候，我们就能表示至多：`15+15+15+16=61` 条。
![[Pasted image 20231220115330.png]]
![[Pasted image 20231221193556.png]]
