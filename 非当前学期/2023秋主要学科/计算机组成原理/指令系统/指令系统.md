## 了解计算机怎么识别指令
## 计算机怎么将指令变成实际的操作


## 计算机怎么识别指令
1. 指令格式
指令=操作码+地址码
操作码：指明该指令要完成的操作。对于**不定长**的操作码，他的操作码并不是集中在某一段中，而是分散在指令字的不同的字段中。为了减少我们的译码、分析难度，我们的变长操作码都会选择使用**扩展操作码技术**（如下图），使操作码的长度随地址数的减少而增加 
![[Pasted image 20230811211840.png]]
设地址长度为n，上一层流出m种，下一层就可以扩展处m×2^n种
注意：不允许短码是长码的前缀，短操作码不能与长操作码的前面部分的代码相同。

指令字：一条指令的机器字长（单位为位 bit）

指令格式：指令字用二进制表示的结构 
]]
![[Pasted image 20230727231713.png]]
				动态长度与静态长度的区别
 地址码：指出该指令的源操作数的地址（一个或两个）、结果的地址以及下一条指令的地址。这个地址可以是主存的地址、寄存器的地址、甚至是 I/O 设备的地址。
 
 ![[Pasted image 20230726223942.png]] ![[Pasted image 20230726223952.png]] ![[Pasted image 20230726224118.png]]
实例补充：
### MIPS R 4000 指令格式
字长 32 位，指令 32 位等长
内存按字节寻址
R 格式，表示操作数都放在寄存器中
	rs 为第一个源操作数，rt 指目标源操作数，*表明寄存器为 3*2 位，具体定位由后六位决定，三个操作数（） ![[Pasted image 20230727221749.png]]
		
1. I 格式，用于立即数或取数、存数指令 ![[Pasted image 20230727221803.png]]
 J 格式 ![[Pasted image 20230727222441.png]]
1. ![[Pasted image 20230727222510.png]]
### A 64 指令格式
![[Pasted image 20230727225303.png]]
![[Pasted image 20230727225718.png]]

### Pentium 指令
![[Pasted image 20230727224019.png]]
![[Pasted image 20230727231433.png]]
## 操作数类型和操作类型 ：
操作数类型
	（1）地址（计算机操作数的地址）
	（2）数字（定点数、浮点数、十进制数）
	（3）字符（ASCILL 码、EBCDIC 码）
	（4）逻辑数据
操作数存放方式
	通常计算机的数据存放在寄存器或存储器中，寄存器的位数便反映了机器字长，一般而言，机器字长都是取字节的 1、2、4、8 倍，便于处理。
	同时，为了便于硬件实现，**要求多字节的数据在存储器的存放方式满足“边界对准”**。
操作类型：
	（1）数据传送
	包括从寄存器到寄存器，寄存器到存储单元，存储单元到存储单元，从源到目的之间的传送，对存储器读和写、交换源和目的等
	（2）算数逻辑
	算数运算（加减乘除）、逻辑运算（与或非）、浮点运算、十进制运算
	（3）移位
	算术移位、逻辑移位、循环移位
	（4）转移
	无条件转移（JMP）、条件转移（根据是否满足条件判断是否转移如移位，溢出）、调用与返回（如果某些特定程序段被反复使用，为避免重复编写，可将这些程序段设定为独立子程序。）、陷阱（隐形指令，在不利条件下才之星。）
2. 指令和数据的寻址方式
操作数或指令在存储器中的地址：某个指令。读出方式有：**地址指定方式**，相联存储方式，堆栈方式当采用地址指定方式时，形成操作数或指令地址的方式，称为寻址方式。



指令格式：
考虑因素：指令字长、操作码位数、地址码位数、地址个数、寻址方式类型、指令字长和操作码位数是否可变

RISC 技术（精简指令系统计算机、没有程序库的）
一条指令完成一个基本动作，多条指令组合完成一个复杂动作

背景：典型程序中的 80%的语句仅仅使用处理器中的 20%的指令，而这些指令都是简单的指令，所以我们可以付出再大的代价增添复杂指令，也只有 20%的使用概率。
于是便有了一种想法，**仅仅用最常用的 20%简单指令，重新组合不常用的 80%的指令功能**，这边引发出了 RISC 技术。

特征：
为了提高性能，RISC 技术采取了许多有效措施，比如减少指令的执行周期数。计算机执行程序所需要的时间 P 可以用下面的式子表达
$P=I*C*T$，其中，I 表示高级语言程序编译后在机器上运行的机器指令数，C 为执行每条机器指令所需的平均机器周期，T 是每个机器周期的执行时间。
由于 RISC 指令简单数量多，I 一般会比 CISC 机器多，但是 C 的值却比 CISC 机器小得多，同时 T 的值也大大下降，综上，使得 RISC 的性能仍然比 CISC 优 2-5 倍。

特点：
1. 选取使用频度高的一些简单指令以及一些很有用但不复杂的指令，让复杂指令的功能由频度高的简单指令的组合来实现
2. 指令长度固定（32 位，立即数），指令格式种类少（寄存器-寄存器操作，存取，控制转移，其他），寻址方式种类少（变址寻址，相对寻址）
3. 只有取数、存数访问存储器，其他都在寄存器内完成
4. CPU 中由多个寄存器
5. 采用流水线技术，大部分都在一个时钟周期内完成
6. 控制器采用组合逻辑控制，不用微程序控制
7. 采用优化的编译程序
![[Pasted image 20230812000113.png]]


![[Pasted image 20230812000157.png]]

章节练习
![[Pasted image 20230727232910.png]]
![[Pasted image 20230728111941.png]]

我们减去 8 位操作码，再减去 log (16)个用于在寄存器直接寻址中找到寄存器，再减去 log (16)个用于再基址寻址中找到我们的寄存器的位数，剩下的 16 位就是我们可以使用的偏移量。