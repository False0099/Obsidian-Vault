 # 单位指标

通过总内存大小，我们能够获得包括但不限于 1. 我们的字长。 

 存储器容量：存储器中存储单元的总数，通常用 KB, MB, GB, TB 来表示

我们在计算机中有字、字节、位等的各种问题，我们在这里进行一个总结。

1. 比特 bit 是计算机内部的最小存储单位。我们计算机组成中的最小存储单元一般为 byte 而不是 bit。（）
2. 字节（byte）计算机数据处理的最小单位，习惯上运用我们大写的 B 表示
B->字节
b->比特位

单位换算：
1 B=1byte=8bit
1 KB=2^10 B
1 MB=2^20 B
1 GB=2^30 B


在不同的计算机中，字和位的转化是不一样的。一般来说，在 32 位计算机中：
1 字=32 位=4 字节

在 64 位计算机中：
1 字=64 位=8 字节
 
 
 
 
3. 计算机的工作流程
##### 省流版 ：
从 5 号架上取菜谱（**根据 PC 取指令**）
---》看菜谱（**指令译码**）----》从架上或盘中取原材料（**取操作数**）----》洗、切、炒（**指令执行**）---》装盘（**回写结果**）----》算出下一菜谱所在的架子号 （**修改 PC 的值**）


##### 严肃版：
一、程序执行前：
数据和指令事先存放在存储器中，每条指令和每个数据都有地址，指令按序存放，指令由字段组成，程序起始地址为 PC

二、开始执行程序：
第一步，根据 PC 取指令；
第二步：指令译码
第三步：取操作数
第四步：指令执行
第五步：回写结果
第六步：修改 PC 的值

程序启动前，指令和数据都存放在存储器中，形式上没有差别，都是 0-1 序列。
采用“存储程序工作方式”：程序由指令组成，程序被启动后，计算机能自动取出一条一条指令执行，执行过程中无需人的干预。
因此，指令中需要给出信息：
操作性质（操作码）
源操作数 1 或/和源操作数 2
目的操作数地址（寄存器编号、存储地址）


# 分类和应用
## 按性能
超级计算机---》大型机------》服务器------》工作站------》微型机------》单片机（U 盘）
从左到右，体积，功耗，性能，存储量，指令系统递增

## 按面向应用
1. 通用计算机
	具有计算机的标准形态
2. 专用计算机/嵌入式计算机
	安装或嵌入到交通工具、机器仪表、控制系统、通信设备、家用电器中的模块化计算机
eg: 为自动驾驶中的某些功能而设计的嵌入式计算机（NVIDA DRIVE AGX Xavier）

# 发展简史
1. 机械时代（BC-1940）
2. 晶体管时代（1943-1959）
	1. 耗电大，体积大，定点计算，机器语言，汇编语言
	2. ENIAC（1946 宾夕法尼亚大学）（5000/s）十进制数
	3. IAS machine（冯诺依曼机）
		1. 定义了五大功能部件
		2. 将程序与数据存储在同一个存储器中
		3. 采用二进制数据：简化了存储器设计
		4. 字长 40 位，存储地址 12 位，指令长度 20 位
		5. 只实现整数运算
3. 集成电路时代（1969-1977）
4. 超大规模集成电路时代（1978-NOW）
	1. 摩尔定律

# 性能指标
1. 吞吐量
	1. 表征一台计算机在某一时间间隔内能够处理的信息量，单位为子节/秒 (B/s)
2. 响应时间
	1. 表征从输入有效到系统产生相应之间的实践度量
3. 利用率
	1. 在给定的时间见给内，系统被实际使用的时间所占的比率
4. **处理机字长**
	1. 处理机运算器中一次能够完成二进制运算的位数。如 32 位、64 位等等, 字长越长，我们的精度越高。
1. 机器字长
	 **CPU 进行一次整数运算所能处理的二进制数据的位数**。
	
	**字长=机器字长=CPU 总线的宽度=CPU 的位数=通用寄存器的宽度**。例如对于 32 位（单位 bit）计算机，我们的机器字长=32(bit)，CPU 总线的宽度=32 (bit)，CPU 的位数=32 (bit)，通用寄存器的宽度也为 32 (bit).

CPU 位数不同代表着不同的 CPU 架构，我们也有着 32 位和 64 位的 CPU 架构。

***数据总线宽度不一定都等于字长！但如果没有指明，我们默认总线宽度等于字长！***

1. 指令字长
	一条指令的总长度，指令字长取决于操作码，指令类型，地址吗等等。
2. 存储字长
	一个存储单元中二进制代码的位数，通常和 MDR 位数相同。
3. 总线宽度
	 指处理器（CPU）与存储器（内存）之间进行互联用于传送数据的二进制位数，以位为单位）
4. 存储器容量
	1. 存储器中所有存储单元的总数
	存储容量=存储单元数 × **存储单元字节数**=存储单元数 × **存储单元字长**

**存储单元数量=2^地址总线宽度**

**存储单元计算机一般默认1Byte，与数据总线宽度无关**

按字节编址：
存放一个机器字的存储



所以你经常看到网上很多说的，为什么**地址总线为32位**，**数据总线为16位的 CPU**，最大可支持容量为4G（2^32） 而不是2^32 * 2B = 8GB ，因为**数据总线根本不影响存储容量！只影响 CPU 传输速率！**





1. 存储器带宽
	1. 单位时间内从存储器读出的字节数，一般用字节数/秒表示。
8.**主频/时钟周期**
	1. CPU 的工作节拍受主时钟控制，主时钟不断产生固定频率的时钟，主时钟的频率 f 成为 cpu 的主频，单位为 MHZ、GHZ
	2. 主频的倒数为周期
9.**CPI（clock Cycles per instruction）**
	1. 每一条指令执行所需要的时钟周期数
	2. CPI=程序执行所需的 CPU 时钟总周期数/程序的指令总数=CPU时钟周期数×始终周期
	3. 
1. **CPU 执行时间**
	1. CPU 执行一段程序所占用的 CPU 时间
	2. CPU 执行时间=执行的指令数×CPI×CPU 时钟周期时间=CPU 时钟周期/程序×时钟周期=CPU 时钟周期/程序
2. **MIPS（平均值）
	1. 每秒百万指令数
	2. MIPS=（指令总数/程序执行时间）× 10^-6
	3. MIPS=时钟周期/CPI
3. **MFLOPS**
	1. 每秒百万次浮点操作次数
	2. MFLOPS=（程序中浮点运算次数/程序执行时间）×10^-6
4. TFLOPS
	1. 每秒万亿次浮点操作次数
	2. TFLOPS=（程序中浮点运算次数/程序执行时间）×10^-12

![[Pasted image 20230802231841.png]]
Eg: 某计算机主频为 1.2 GHZ, 其指令分别为 A、B、C、D 四类，对应的 CPI 为 2、3、4、5，已知 A、B、C、D 四类占比以此为 50%, 20%, 10%, 20%, 求该机的 MIPS 数
```
我们先算出平均的CPI（每一条指令执行所需要的时钟数）
CPI=（0.5n*2+0.2n*3+0.1n*4+0.2n*5）/n=3;
（主频1.2GHZ表明一秒能够执行1.2*10^9条指令，所以能执行）
MIPS=1.2*1e9/3=400MIPS
```


# 基准程序
测试基准程序针对特定的应用环境，通过一组有代表性的程序来评估系统的性能
评判指标：
	1. 程序运行的时间长度为度量，或是单位时间内完成的操作数量
	2. 对性能做出接近真实情况的评估
	3. TPC、SPEC、SAP SD、Linpack（评估超级计算机）、HPCC
公司：SPEC
	1. 根据应用领域不同设置不同测试基准
	2. SPEC cloud (针对云计算) SPECviewperf（针对图形和工作站性能）SPEC CPU（针对运算密集的计算机系统）

# 计算机的硬件
1. 计算机由运算器、控制器、存储器、输入设备、输出设备五大部件组成
	1. 存储器：存放程序和数据
	2. 控制器：根据取得的指令向其他部件发出控制信号，完成指令规定操作
	3. 运算器：完成算数和逻辑运算操作
	4. 输入/输出设备：完成人与计算机的相互通信
2. 在机器内部，指令和数据均以二进制码表示
	1. 指令由操作码和地址码组成
3. 机器以运算器为中心，数据传送都经过运算器
4. 采用存储程序的方式，编制好的程序和数据放在同一存储器中，计算机自动完成逐条取出指令和执行指令的操作。（存储程序式计算机）
5.**基于总线的计算机**
	1. 在原本的计算机中，如果 CPU 上没有任何的总线，而且还要连接很多设备，那么 CPU 上的雕刻等技术必须非常先进，否则就无法实现，因此，我们引入了总线
	2. 总线连接，即简化 CPU 和其他设备的连接（优点）
	 ![[Pasted image 20230722224000.png]]


![[)WVPYT{VAK[F~P_J(@2NJ_B_tmb.png]]

### 多处理器

# 计算机硬件层剖析
计算机系统---》**计算机结构**----》**处理器**------》逻辑设计------》电路设计------》设备制造

计算机软件分类
1. 系统程序
	1. 操作系统
	2. 调试程序、诊断系统
	3. 汇编器、编译器、解释程序
	4. 数据库管理系统
2. 应用程序
	1. EDA 设计软件
	2. 数据处理软件
高级语言------》汇编语言------》机器语言（机器码）------》处理器------》计算机结构------》

# 计算机系统的层次结构
1. 第 1级为微程序级，是一个实际机器层，由硬件直接执行微指令。
2. 第 2 级为一般机器级，也称机器语言级，他由微程序解释机器指令系统，这一级也是硬件级。
3. 第 3 级为操作系统级。用于对计算机系统的软件硬件资源进行管理和调度，
4. 第 4级为汇编语言级。通过汇编器将汇编程序翻译成机器指令。
5. 第 5级为高级语言级。用编译程序翻译成第 4级的汇编语言程序
![[Pasted image 20230801234231.png]]

数据流动过程：
![[Pasted image 20230801234552.png]]
键盘-----》寄存器---->主存----->(系统调用把程序装载到存储器中)---->寄存器---->显示器

![[Pasted image 20230801235140.png]]
# 软件与硬件的逻辑等价性
1. 硬件-》能实现高速的算术逻辑运算功能，但难以实现较复杂的功能
2. 软件------》易于实现各种复杂的算术逻辑运算功能，但是频繁的访问内存制约了处理速度
3. 理论上，任何软件算法都可以用硬件实现
4. 比如我们之前的 NVIDA DRIVE AGX 中就存在有（深度学习加速器（DLA），可编程视觉加速器等硬件来实现算法的）

|  | 器件价格 | 速度 |  易维护性 | 变更周期 |
| ---- | ---- | ---- | ---- | ---- |     
| 硬件 | 高 | 快 | 地 | 长 |
| 软件 | 低 | 慢 | 高   | 短 |

# 发展趋势
最早的计算机使用机器语言编程。![[Pasted image 20230801235408.png]]
第二代计算机编程使用汇编语言
![[Pasted image 20230801235358.png]]
现代计算机使用高级语言编程
![[Pasted image 20230801235443.png]]


