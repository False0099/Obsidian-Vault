上一篇：[[双端口存储器]]
下一篇：[[Cache替换]]
## 性能分析
1. 命中率：![[Pasted image 20231207114908.png]]
例题：
注意：在访问 `主存` 之前，一定要先去访问一次 `Cache` 才能正常进行
![[Pasted image 20231207114923.png]]


基本工作原理：
Cache 位于存储器结构层次的顶层，通常**由 SRAM 构成**，基本结构如图所示：
![[Pasted image 20230927100307.png]]
为便于 Cache 和主存间交换信息，**Cache 和主存都被划分为单位面积相等的块**，Cache 块又称 Cache 行，每块由若干字节组成，**快的长度称为块长**，Cache 中的**块数量要远少于主存中的块数**，他**仅保存主存中最活跃的若干块**的副本。

工作过程：
1.CPU 发出读请求
如果**访存地址在 Cache 中命中，就把此地址转换为 Cache 地址**，**直接对 Cache 进行读操作**，
若 Cache 不命中，就再去访问我们的主存，并**把此字在的块一次性的从主存调入 cache**，
·若 Cache 已满，我们就需要根据我们的替换算法，把这个块拿去替换 Cache 中原来的某块信息。
注意：**CPU 与 Cahe 之间的数据交换以字为单位，而 Cache 与主存之间的数据交换以 Cache 块为单位。**

2. CPU 发出写请求
若 Cache 命中：Cache 与主存中的内容不一致-》按照一定的写策略处理

数据计算：
Cpu 欲访问的信息已经在 Cache 中的比率称为 Cache 的命中率。设一个程序执行期间，Cache 的总命中次数为 $N_{c}$,访问主存的总次数为 $N_{m}$,则命中率 H 为 $H=\frac{N_{c}}{(N_{c}+N_{m})}$

设 $t_{c}$ 为命中时的 Cache 访问时间，$t_{m}$ 为未命中时的访问时间，则我们的 Cache-主存系统的平均访问时间为 $T_{a}=Ht_{c}+(1-H)t_{m}$

![[Pasted image 20230927101131.png]]



