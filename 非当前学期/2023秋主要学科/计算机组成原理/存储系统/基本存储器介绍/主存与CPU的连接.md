1. 存储器与 CPU 的连接概述
主存储器通过数据总线、地址总线和控制总线与 CPU 连接
数据总线的位数与工作频率的乘积正比于数据传输率
地址总线的位数决定了可寻址的最大内存空间
控制总线指出总线周期的类型和本次输入/输出操作完成的时刻


CPU 和主存之间有同步和异步两种通信方式 ![[Pasted image 20230808225909.png]]
单块存储器与 CPU 的链接
![[Pasted image 20230809212411.png]]

8×8--》（8 个字数✖8 个字长），数据总线的存储字长为 64 bit。


**一、主存容量的扩展**（只有我们的 SRAM 才能进行扩展）
```cpp
struct node{
	int digit1;
	int digit2;
	int digit3;
	int digit4;
	int digit5;
}chip;

位扩展：
chip'[1]=chip[0]+chip[1];
字扩展
struct node{
	int chip;
	int inchip;
}chip';

```
1. 位扩展法（即提高我们的单位容量，**一根地址线同时对应两个芯片甚至多个芯片**）
若给定的芯片的字数 (地址数)符合要求，但位数较短，不满足设计要求的存储器字长，则需要进行位扩展，让多片给定芯片并行工作。三组信号线中，**地址线和控制线公用**而数据线单独分开连接，**$1K=10$ 根线**

![[Pasted image 20230921130005.png]]

注意：**当我们在进行位扩展时，我们还要同时把我们的地址线上进行选择，这就需要用到我们的另外电路，这就需要小号我们的一根线**


2. 字扩展法（即扩展我们的寻址范围）
![[Pasted image 20230921130119.png]]

若给定的芯片存储容量较小 (字数少)，不满足设计要求的总存储容量，则需要进行字扩展，让**多片给定芯片分时工作**。三组信号线中给定芯片的**地址总线和数据总线公用，读写控制信号线公用**，由地址总线的高位译码产生片选信号，让各个芯片分时工作。
此时，我们的地址规则就变为**以我们的前 $\log n$ 位表示我们的片，后面的若干位再作为我们的片内地址**。确定我们的高位地址，就需要我们用我们的 3-8 译码器，或者什么其他的译码器，来确定我们的片内地址。![[Pasted image 20230921130655.png]]
注意：再仅采用字扩展时，各芯片连接地址线的方式相同，连接数据线的方式也相同，但在某一时刻只需先去部分芯片，所以通过片选信号 C-S 或采用译码器设计连接到对应的芯片。

3. 字位同时扩展法
实际上，我们的存储器往往需要同时扩展字和位。字位同时扩展，既能增加我们存储字的数量，有增加了存储字长。

	![[Pasted image 20230921131256.png]]



注意：采用字位同时扩展时，各芯片连接地址线的方式相同，但连接数据线的方式不同，而且需要通过片选信号或采用译码器设计连接到相应的芯片。


## 多块存储器与 CPU 的链接
存储芯片的地址分配和片选：
1. 线选法：
	用除片内寻址外的高位地址直接分别接至各个存储芯片的片选端，当某地址线信息位 0 时，就选中与之对应的存储芯片，这些片选地址线每次寻址时是能有一维有效，不允许同时有多位有效

2. 译码器片选发
	译码片选法用除片内寻址外的高位地址线通过地址译码器芯片产生片选信号
1.地址线的连接
	通常将 CPU 地址线的低位与存储芯片的地址线相连。CPU 地址线的高位或在存储芯片扩充时用，或用作其他用途 
2.数据线的连接
	CPU 的数据线数不一定和存储芯片的数据线数相等，此时必须对存储芯片扩位，使其和 CPU 数据线数相等
3、读写命令线的连接
4.片选线的连接
5.合理选择存储芯片（ROM 存放系统程序，RAM 位用户编程设计）
![[Pasted image 20230726214716.png]]
选择规则：尽量选少的，空间足够大的单片芯片
题目中，0-8192 为系统程序，告诉我们 ROM 是 8 K 的，8192-31767，那就说明我们一共要选 24 k，我们就要选 8 k * 8 的，而又因为 2 K 为系统程序工作区，所以我们要选 2 K×8 一片
地址区间
0-8192 0000 0000 0000 0000--0001 1111 1111 1111
8192-32767 -》0010 0000 0000 0000-》0111 1111 1111 1111
63488-》65535 1111 1000 0000 0000-》1111 1111 1111 1111
选择 EPROM 时，要用到 3：8 译码器的 Y 0 输出端，
选择 3 片 8×8 SRAM 时，用 YI, Y 2, Y 2 输出端
选择 2 K×8 位 SRAM 时，用 Y 7 输出端以及 A 11, A 12 地址线
![[Pasted image 20230726215427.png]]

![[Pasted image 20230726220145.png]]
答案为 D（因为要变成 8 位，和 ROM 相同）

![[Pasted image 20230726221901.png]]
A
SRAM 是可读可写，
ROM 不需要刷新