## 回顾
![[Pasted image 20231007113044.png]]

## 硬布线控制器 （纯硬件控制）
**根据指令操作码、目前的机器周期、节拍信号、机器状态条件，即可确定现在这个节拍下应该发出哪些微命令**

下图中就展示了我们的相对应的简单映射关系（？）
![[Pasted image 20231007113505.png]]


例如：我们要求我们 $M(MAR)\to MDR$ 这一条指令的最终电路，我们先转换为我们的逻辑表达式：$$FE\times T+IND\times T_{1}\times(ADD+STA+LDA+JMP+BAN)+EX\times T_{1}(ADD+LDA)$$
最后，将我们的逻辑表达式转换为数字电路，我们就可以得到最后的电路图为：
![[Pasted image 20231007113743.png]]

 

设计步骤：
1.分析每个阶段的微操作序列（取值、间址、执行、中断）

2.选择 CPU 的控制方式（采用定长机器周期？多少节拍？）（一般来说，我们采用同步控制方式，一个机器周期安排三个节拍）

3.安排微操作时序

4.电路设计

分析：
## 取指周期的微操作序列：
1. PC->MAR

2. 1->R


3. M(MAR)->MDR


4. MDR->IR


5. OP(IR)->ID（指令译码器）(PC)+1->PC


## 间址周期的微操作序列 （固定不变：
1. AD(IR)->MAR
2. 1->R
3. M(MAR)->MDR
4. MDR->AD(IR)

## 执行周期 （各不相同）
1. CLA     0->AC
清空我们 ACC 的指令
ACC 清 0


2. LDA X 
取数指令   1->R
取到 ACC M (MAR)-》MDR，MDR->AC

3. JMP X

Ad（IR）->PC

4. BAN X
$A_{0}*AD(IR)+\neg A_{0}\times(PC)\to PC$


## 安排时序
安排原则：
1.先后顺序不能改变

2.被控对象不同的微操作，尽量安排在一个节拍内完成

3.占用时间短的，金量安排在一个节拍内完成

### 取值周期的微操作时序
![[Pasted image 20230813220555.png]]

### 执行周期的微操作时序
![[Pasted image 20230813221323.png]]


## 列出操作时间表

### 取指阶段操作时间表
![[Pasted image 20231007115149.png]]


### 间址周期操作时间表
![[Pasted image 20231007115246.png]]

### 执行周期时间表 ：
![[Pasted image 20231007115342.png]]




## 汇总写出我们的逻辑表达式 ：
![[Pasted image 20231007115524.png]]

优缺点：
![[Pasted image 20231007115800.png]]