## 基本思路 ![[Pasted image 20231008133141.png]]
## 微程序控制器基本结构
**控制存储器**：CM，用于存放各指令对应的微程序，用 ROM 构成（相当于我们的**主存**），有这个才能做到我们的**存储程序**。

微地址寄存器 CMAR：类似于我们 CPU 中 **MAR** 的作用（在我们的单地址中会被优化为我们的 `PC`）

地址转移逻辑（微地址形成部件）：产生初始微地址和后继微地址，

注意：我们的**微程序控制器中没有我们的 PC，所以我们的下一条指令应该由我们的指令给出**。
![[Pasted image 20231206145940.png]]


## 执行过程：
1. CPU 取一条机器指令
2. `IR` 将我们的机器指令转换为我们有意义的微程序**初始地址**，并把这个地址传给我们的 `地址转移逻辑`,
3. 我们的``地址转移逻辑``把我们的地址传输给我们的 `μMAR(PC)`,然后我们再从我们的 `CR` 中取出我们的对应指令，
4. **微程序**控制器根据**微指令**中的操作控制字段来执行我们的微**命令**。
5. 执行完成后，我们回到我们的取值操作，取下一条机器指令。

一、微指令地址的生成

顺序逻辑：

CMDR: 存放从 CM 中取出的微指令，他的位数同微指令字长相等。

![[Pasted image 20230813232615.png]]

![[Pasted image 20231008134124.png]]

