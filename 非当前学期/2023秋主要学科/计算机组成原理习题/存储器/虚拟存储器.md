上一篇：[[Cache写]]
下一篇：[[非当前学期/2023秋主要学科/计算机组成原理/指令系统/指令格式|指令格式]]
## 基本公式
虚拟地址=虚拟页号+页内地址
物理地址=页框号+页内地址

虚拟地址->查 TLB（虚拟地址转为主存地址）->(命中)转换为我们的物理（主存）地址->Cache 映射算法->(命中)访问我们的对应 Cache

## 概念
![[Pasted image 20240102181531.png]]

01. C
![[Pasted image 20240102181537.png]]
02. **A** 局部性原理的含义是**在一个程序的执行过程中，其大部分情况下是顺序执行的，某条指令或数据使用后，在最近一段时间内有较大的可能再次被访问** (时间局部性); 某条指令或数据使用后，其邻近的指令或数据可能在近期被使用 (空间局部性)。在虚拟存储管理系统中，程序只能访问主存获得指令和数据，所以选项 A 正确，选项 B、C、D 均是局部性原理的一个方面而已。
![[Pasted image 20240102181543.png]]
03. D
![[Pasted image 20240102181549.png]]
04. A
![[Pasted image 20240102181807.png]]
05. **D** 虚拟存储器中，地址映射由操作系统来完成，但需要一部分硬件基础的支持，如快表、地址映射系统等。
![[Pasted image 20240102181758.png]]
06. B
![[Pasted image 20240102181814.png]]
07. **A** 页式虚拟存储器中，**页面若很小，虚拟存储器中包含的页面数就会过多，使得页表的体积过大，导致页表本身占据的存储空间过大，使操作速度变慢**，因此 II 错误。当页面很大时，虚拟存储器中的页面数会变少，由于主存的容量比虚拟存储器的容量小，主存中的页面数会更少，每次页面装入的时间会变长，每当需要装入新的页面时，速度会变慢，因此 III 正确。段式虚拟存储器是按照程序的逻辑性来设计的，具有易于实现程序的编译、管理和保护，也便于多道程序共享的优点，因此 IV IE 确。

![[Pasted image 20240102181826.png]]
08. D 快表采用高速相联存储器，它的**速度快来源于硬件本身**，而不是依赖搜索算法来查找的；慢表存储在内存中，通常是依赖于查找算法，故 A 和 B 错误。快表与慢表的命中率没有必然联系，快裴仅是慢表的一个部分拷贝，不能够得到比慢表更多的结果，因此 C 错误。（快表是存在于主存当中的，慢表并不存储在我们的主存当中）

![[Pasted image 20240102181834.png]]
09. **D**
![[Pasted image 20240102181906.png]]
13. **D** 在请求分页系统中，每当要访问的页面不在内存中时，CPU 检测到异常，便会产生缺页中断。请求操作系统将所缺的页调入内存。缺页处理由缺页中断处理程序完成，根据发生缺页故障的地址从外存读入所缺失的页，缺页处理完成后**回到发生缺页的指令继续执行**。选项 D 中描述回到发生缺页的指令的下一条指令执行，明显错误，所以选 D。
![[Pasted image 20240102181913.png]]
14. D
## 计算：
![[Pasted image 20240102181845.png]]
10. **A**按字节编址，页面大小为 4 KB, 页内地址共 12 位。地址空间大小为 4 GB,虚拟地址共 32 位，前 20 位为页号。虚拟地址为 03 FF F 180 H, 因此页号为 03 FFFH, 页内地址为 180 H。查找页标记 03 FFFH 所对应的页表项，页框号为 0153 H, 页框号与页内地址拼接即为物理地址 015 3180 H。


![[Pasted image 20240102181852.png]]
11. **B**（查询表格+放入数据）上述指令的执行过程可划分为**取数、运算和写回过程**，取数时读取 xaddr 可能不需要访问主存而直接访问 Cache, 而**写直通**方式需要把数据同时写入 Cache 和主存，因此至少访问 1 次。

![[Pasted image 20240102181858.png]]
12. C 直接映射：主存地址=tag+cache 地址=
主存块大小（16 B）= $4bit$,

## 综合题

![[Pasted image 20240102185141.png]]
![[Pasted image 20240102185158.png]]
（这里我们的问题是，采用直接印社的时候，我们的低位不仅要存储我们的块信息，也要村我们的对应地址信息。因此还要有 $Cache$ 字块标记）
![[Pasted image 20240102185556.png]]