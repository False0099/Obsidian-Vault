## 范围：
我们的数据链路层的范围通常都是**局限在一根同轴电缆**，或者**同一根网线上**的，在这种情况下，是我们的数据链路层（局域网）的主要服务范围。也就是说，我们的数据链路层的范围是在**同一个局域网内的链接，数据的转发**。
## 术语：
1. 结点：我们将我们的主机和路由器都视为我们的一个结点
2. 链路：我们的链路分为我们的下面三种方法：我们的有线链路 (wired links)，无线链路 (wireless links)，局域网（LANs）。
3. 帧：我们封装的更高一层的网络层的数据。如果我们基于 ETHERNET 2 或者我们的 IEEE 802.3 标准，我们就认为我们是一个**以太网数据帧**。
4. 帧长：我们的数据链路层中，我们的**首部**+数据包+**尾部**就是我们的一个数据链路层的帧长
5. 上下文：数据报可以在不同的链路上以不同的链路协议传送，例如我们的第一跳可以是以太网，第二跳可以是帧中继，最后一条可以是我们的 802.11
![[Pasted image 20240701163543.png]]
## 功能：
![[Pasted image 20240701163349.png]]
### 为上层提供的服务：
我们的数据链路层一般来说为我们的上一层提供了下面的几类服务：
1. 无确认的无连接服务：无确认的无连接服务。源机器发送数据帧时**不需先建立链路连接**，目的机器收到数据帧时**不需发回确认**。对丢失的帧，数据链路层不负责重发而交给上层处理。适用于实时通信或误码率较低的通信信道，如**以太网**。

2. 有确认的无连接服务：有确认的无连接服务。源机器发送数据帧时**不需先建立链路连接**，但**目的机器收到数据帧时必须发回确认**。源机器在所规定的时间内未收到确定信号时，就重传丢失的帧，以提高传输的可靠性。该服务适用于误码率较高的通信信道，如**无线通信**。

3. 有确认的面向连接服务：有确认的面向连接服务。帧传输过程分为三个阶段：建立数据链路、传输帧、释放数据链路。目的机器对收到的**每一帧都要给出确认**，源机器收到确认后才能发送下一帧，因而该服务的可靠性最高。该服务适用于通信要求(可靠性、实时性)较高的场合。

### 链路管理
数据链路层**连接的建立、维持和释放过程**称为链路管理，它主要用于面向连接的服务。链路两端的结点要进行通信，必须首先确认对方已处于就绪状态，并交换一些必要的信息以对帧序号初始化，然后才能建立连接，在传输过程中则要能维持连接，而在传输完毕后要释放该连接。

在多个站点**共享同一物理信道**的情况下(如在局域网中)如何在要求通信的站点间分配和**管理信道**也属于数据链路层管理的范畴。

### 帧定界, 同步
两台主机之间传输信息时，必须将网络层的分组封装成**帧**，以帧的格式进行传送。将一段数据的前后分别添加首部和尾部，就构成了帧。因此，帧长等于数据部分的长度加上首部和尾部的长度。首部和尾部中含有很多控制信息，它们的一个重要作用是**确定帧的界限，即帧定界**。

而**帧同步指的是接收方应能从接收到的二进制比特流中区分出帧的起始与终止**。如在 HDLC 协议中，用标识位 F(01111110)来标识帧的开始和结束。通信过程中，检测到帧标识位 F 即认为是帧的开始，然后一旦检测到帧标识位 F 即表示帧的结束。
![[Pasted image 20240701162137.png]]



如果在数据中恰好出现与帧定界符相同的比特组合 (会误认为“传输结束”而丢弃后面的数据), 那么就要采取有效的措施解决这个问题，即透明传输。更确切地说，透明传输就是不管所传数据是**什么样的比特组合，都应当能在链路上传送**。

### 流量控制：
流量控制的目的是为了由于收发双方的工作速率和缓存空间的差异，可能出现发送方的发送能力大于接收方的接受能力的情况，这个时候，如果我们不对发送方加以控制，就会导致前面来不及接收的数据，“帧”被后面的数据所覆盖的情况，造成帧的丢失。

为了实现这一个过程，我们需要通过一种反馈机制是的发送方知道接收方能否跟上自己，也就是让发送方知道，在什么情况下可以发送下一帧。
![[Pasted image 20240701162744.png]]

**在 OSI 体系模型中，我们的数据链路层具有流量控制的功能，但是在 TCP. IP 中没有**。
### 差错控制：
由于信道噪声等各种原因，帧在传输过程中可能会出现错误。用以使发送方确定接收方是否正确收到由其发送的数据的方法称为差错控制。通常，这些错误可分为位错和帧错。**位错指帧中某些位出现了差错**。通常采用循环冗余校验 (CRC)方式发现位错，通过自动重传请求 (Automatic Repeat reQuest, ARQ)方式来重传出错的帧。

具体做法是：让发送方将要发送的数据帧**附加一定的 CRC 冗余检错码一并发送**，接收方则根据检错码对数据帧进行错误检测，若发现错误则丢弃，发送方超时重传该数据帧。这种差错控制方法称为 ARQ 法。ARQ 法只需返回很少的控制信息就可有效地确认所发数据帧是否被正确接收。

**帧错指帧的丢失、重复或失序等错误**。在数据链路层引入定时器和编号机制，能保证每一帧最终都能有且仅有一次正确地交付给目的结点。





## 服务：
作为我们的数据链路层，我们应该提供下面的几种服务：
1. 组帧，将我们高层的数据封装为我们的一个帧，**增加头，增加尾**，同时要求实现我们的**帧同步**。要求我们在物理层传输的时候，能够从我们的 01 序列中识别出我们的信息。我们一般会采用我们的一个**特殊字符串**来表示我们的结束或者我们的开始。
2. 链路接入：当我们的网络中使用的链路是一个**共享介质**，过程中有很多的结点，合格时候我们就需要我们的链路接入的方法来实现。帧首部中的**MAC 地址**用于表示我们的数据帧的源和目的地址。
3. 相邻节点可靠交付：这一部分的内容其实类似于我们的传输层中的可靠传输的要求。但是我们也不是所有的都要采用，我们在**误码率低**的链路上使用的较少。
4. 流量控制：协调我们的相邻节点和我们的发送和接收。
5. 差错控制：应对信号的衰减和噪声产生的差错。
6. 差错纠正：直接能够纠正我们的错误。
7. 全双工和双工通信：全双工要求我们在我们的两侧都可以发送给对方，且发送的都是可靠的，单双工则只能维护一个单侧的传输。

## 具体实现：
我们的链路层协议的具体实现，通常是由我们的**网卡**或者我们的其他设备来实现的，或者我们的**WIFI**网卡。这一个部分能够同时实现我们的数据链路层的功能，也能够实现我们的其他的功能。