要在全球范围内把数以百万计的网络互联起来，并且能够互相通信，是一项非常复杂的任务，此时需要解决许多问题，比如不同的寻址方案、不同的网络接入机制、不同的差错处理方法、不同的路由选择机制等等。用户的需求是多样的，没有一种单一的网络能够适应所有用户的需求。网络层所要完成的任务之一就是使这些**异构的网络实现互联**。

使用物理层或数据链路层的中继系统时，只是把一个网络扩大了，而从网络层的角度看，它仍然是同一个网络，一般并不称为网络互联。因此网络互联通常是指用路由器进行网络互联和路由选择。路由器是一台专用计算机，用于在互联网中进行路由洗择。
![[Pasted image 20240701212648.png]]
## 基本功能：

网络层的主要任务是转发和路由选择。可以将网络层抽象地划分为数据层面 (也称转发层面)和控制层面，转发是数据层面实现的功能，而路由选择是控制层面实现的功能。
### 路由选择：
指按照复杂的分布式算法，根据从各相邻路由器所得到的关于整个网络拓扑的变化情况，动态地改变所选择的路由。**全局性功能**。(规划)

### 分组转发：
指路由器根据转发表将用户的 IP 数据报从合适的端口转发出去。路由器选择我们的对应的路径，**然后根据我们选择的路径**，选择**合适的端口**，把我们的数据发送过去。**局部性功能**。（局部，数据平面）

#### 路由表与转发表：
路由表是根据路由选择算法得出的，而转发表是从路由表得出的。转发表的结构应当使查找过程最优化，路由表则需要对网络拓扑变化的计算最优化。在讨论路由选择的原理时，往往不去区分转发表和路由表，而是笼统地使用路由表一词。也就是说我们的**转发表需要对路由表进行二次处理**。

### 拥塞控制：
在通信子网中，因出现过量的分组而引起网络性能下降的现象称为拥塞。例如，某个路由器所在链路的带宽为 R B/s, 如果 IP 分组只从它的某个端口进入，那么其速率为 $r_\mathrm{in}$ B/s。当 $r_\mathrm{in}=R$ 时，可能看起来是件“好事”,因为链路带宽被充分利用。但是，如图 4.3 所示，当分组到达路由器的速率接近 $R$ 时，平均时延急剧增加，并且会有大量的分组被丢弃(路由器端口的缓冲区是有限的),整个网络的吞吐虽会骤降，源与目的地之间的平均时延也会变得近乎无穷大。

![[Pasted image 20240701213125.png]]

为避免拥塞现象的出现，要采用能防止拥塞的一系列方法对子网进行拥塞控制。拥塞控制主要解决的问题是如何获取网络中发生拥塞的信息，从而利用这些信息进行控制，以避免由于拥塞而出现分组的丢失，以及严重拥塞而产生网络死锁的现象。

我们对于我们的拥塞控制存在两种方法：
1. 开环控制：在设计网络时**事先**将有关发生拥塞的因素考虑周到，力求网络在工作时不产生拥塞。这是一种**静态的预防方法**。一旦整个系统启动并运行，中途就不再需要修改。开环控制手段包括确定何时可接收新流量、何时可丢弃分组及丢弃哪些分组，确定何种调度策略等。所有这些手段的共性是，在做决定时不考虑当前网络的状态。
2. 闭环控制：闭事先不考虑有关发生拥塞的各种因素，采用监测网络系统去**监视**，及时检测哪里发生了拥塞，然后将拥塞信息传到合适的地方，以便调整网络系统的运行，并解决出现的问题。闭环控制是基于反馈环路的概念，是一种**动态的方法**。

## 服务模型：
## 网络服务模型

$\mathbb{Q}:$ 从发送方主机到接收方主机传输数据报的“通道”


对于单个数据报的服务：

1. 可靠传送
2. 延迟保证，如：少于40 ms 的延迟

对于数据报流的服务：

1. 保序数据报传送
2. 保证流的最小带宽口分组之间的延迟差

