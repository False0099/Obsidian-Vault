首先，我们的网络划分为我们的内部网关和我们的外部网关，我们的内部网关协议负责处理我们的**某一个自洽系统内部的网络连接**，这一个自洽系统往往由我们的**联通，移动，电信，军事，教育**的方法来进行分类。

而如果我们希望能够进行跨系统的交流，就需要通过我们的**外部网关协议**BGP 来进行了。适用于我们的**不同自治系统之间的路径选择**。

## 概念：
由于我们在不同的 AS 内度量路由的 `代价` 可能不同，因此，对于我们的不同的自洽系统之间的路由选择，使用统一的 `代价` 来进行计算是不可能的。
![[Pasted image 20240606142310.png]] 

我们在传送数据的时候，还应该考虑**政治经济问题**，以及我们的各类其他问题。
![[Pasted image 20240606142358.png]]



因此，我们的 BGP 只能寻找**简单路径**，不一定能够选择我们的**最优路径**。

## 过程：
第一步：我们的网络管理员，为我们的每一个自治系统中配置若干个路由器作为该自洽系统的**BGP 发言人**。一般来说，两个 BGP 发言人都是通过一个共享网络连接在一起的，而 BGP 发言人往往就是 BGP 边界路由器。BPG 发言人除了运行 BGP 协议外，还必须运行自己所在 AS 所使用的内部网关协议 IGP
![[Pasted image 20240606142625.png]]

第二步：BGP 发言人交换网络可达性的信息，也就是要到达某一个网络索要经过的一系列**自洽系统**。当**BGP 发言人**互相交换了网络可达性的信息后，各个 BGP 发言人就根据采用的策略，从收到的路由器中找到到达各自洽系统中的**简单路径**。

![[Pasted image 20240606142956.png]]


## 特点：
1) BGP 交换路由信息的结点数量级是自治系统的数虽级，要比这些自治系统中的网络数少很多。
2) 每个自治系统中 BGP 发言人 (或边界路由器)的数目是很少的。这样就使得自治系统之间的路由选择不致过分复杂。
3) BGP 支持 CIDR, 因此 BGP 的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列。
4) 在 BGP 刚运行时，BGP 的邻站交换整个 BGP 路由表，但以后只需在发生变化时更新有变化的部分。这样做对节省网络带宽和减少路由器的处理开销都有好处。
## 报文类型：
BGP-4 是现在使用的最多的版本，在这个版本中，规定了下面的四种报文：
![[Pasted image 20240606143309.png]]


## 路径选择：
在我们的 BGP 协议中，我们的路径选择遵循我们的下面的几种原则，按照我们的下面的几个优先级来选择我们的路径：
1. 静态设置（这是我们的优先级最高的选项，如果有一定先走这一个）
2. 经过的 AS 跳数最少的路由
3. 最快离开当前 AS 的方法。