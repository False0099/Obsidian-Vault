**ACK 字段标识是否有连接，如果有就是 1，否则就是 0**

**FIN 字段表示是否在终结，如果是就是 1，否则就是 0**

**SYN 字段表示是否在建立连接，如果有就是 1，哦负责就是 0**。
## 主要特点：
1. 面向连接的协议，提供面向连接的服务，**三次握手四次挥手**
2. 支持无差错，不丢失，不重复，按顺序到达，**字节流**
3. 全双工通信，**双向传输，一边发一边发**
4. 面向字节流。也就是说我们会把应用层的数据进行对应的拆分和合并。**流水线**
5. 发送方不会太快的发送,**流量控制**。

我们的 TCP 协议的特点就是在不可靠的 IP 层之上，实现的**可靠**(什么是可靠）的协议，它主要解决数据传输的可靠，有序，无丢失和不重复问题。

而我们也可以说，解决数据传输的可靠，有序，无丢失和不重复问题的协议就是一个可靠的协议。

## TCP 报文结构：
![[Pasted image 20240328144306.png]]
![[Pasted image 20240702101345.png]]
各个字段意义如下：
第一行：
1. `Source Port,Destination Port` 端口也就是我们运输层和应用层的服务端口**顾名思义**，涉及到我们的复用分用操作。（16 bit+16 bit）
第二行：
1. `Sequence Number`：序号。占 4 B，范围为 0~2 $^32-1$,共 2 $^{32}$ 个序号。TCP 是面向**字节流**的 (即 TCP 传送时是逐个字节传送的), 所以 TCP 连接传送的字节流中的**每个字节都按顺序编号**。序号字段的值指的是本报文段所发送的数据的**第一个字节的序号**。例如，一报文段的序号字段值是 301, 而携带的数据共有 100 B, 表明本报文段的数据的最后一个字节的序号是 400, 因此下一个报文段的数据序号应从 401 开始。
第三行：
1. `Ack`: 确认号，确认号。占 4 B, 是期望收到对方下一个报文段的第一个数据字节的序号。若确认号为 $N$,则表明到序号 $N-1$ 为止的所有数据都已正确收到。
第四行：
1. `TCP segment length` ：占4位，这里不是 IP 数据报分片的那个数据偏移，而是表示**首部长度**(首部中还有长度不确定的选项字段),它指出 TCP 报文段的**数据部分起始处距离 TCP 报文段的起始处有多远**。“数据偏移”的单位是 32 位(以 4B 为计算单位)。由于 4位二进制数能表示的最大值为 15,因此 TCP 首部的最大长度为 60B。
2. 保留位： 
3. `FLAG`：标志位
	1. `Urgent` 紧急位: 表明我们的优先级（不常用）
	2. `ACK` 确认位：如果 ACK 为 1，表示我们是一个确认保温，TCP 规定，在连接建立后，**所有的传送报文都要把 ACK 置为 1**。
	3. `Push`: 推送位：
	4. `Reset`: 复位位
	5. `Syn`: 同步位（同步位 SYN。当 SYN=1 时表示这是一个**连接请求或连接接受报文**。当 SYN=1, ACK=0 时，表明这是一个连接请求报文，对方若同意建立连接，则应在响应报文中使用 SYN=1, ACK=1。）应报文中使用 SYN=1, ACK=1。）
	6. `FIN`: 终止位
第五行
1. `Window`：窗口位，**流量控制**
2. `CheckSum`: 检验和（校验我们 TCP+TCP 上层数据+伪首部=二进制的反码求和）
3. `Urgent Point`: 只有在紧急位有效时有意义，

## 计算题：

![[Pasted image 20240411143520.png]]

