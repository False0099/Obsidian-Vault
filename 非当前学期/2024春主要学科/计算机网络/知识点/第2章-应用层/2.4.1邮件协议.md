**注：现代电子邮件，大部分都是基于 HTTP 协议，SMTP 协议仅用于跨平台的传递**

# 邮件架构

邮件协议存在四个重要的组件：
用户代理
邮件服务器（邮筒）
邮件传输协议：SMTP, MIME（我们的邮件怎么从我们的人话转变为机器话，**发送**）
邮件存储访问协议：POP, IMAP （限制了我们的应用怎么处理我们的邮件数据，**接收**）
![[Pasted image 20240525000152.png]]

![[Pasted image 20240525000538.png]]


![[Pasted image 20240525000651.png]]

**注意，我们的电子邮箱不能出现重复**。

# 交付过程：
第一步：我们的用户编写对应的文本，并且把文本**发送给对应的发送方邮件服务器**（重点，这个协议与用户相关）

第二步：我们的**发送方服务器**把信息传递给我们的**接收方服务器**，之后，我们再去通过我们的

第三步：**接收方服务器**把我们的内容发给我们的接收方（重点，这个协议与用户相关）



# 邮件协议：
## SMTP
简单邮件传输协议 (Simple Mail Transfer Protocol, SMTP) 是一种提供可靠且有效的电子邮件传输的协议，它控制两个相互通信的 SMTP 进程交换信息。由于 SMTP 使用客户/服务器方式，因此负责发送邮件的 SMTP 进程就是 SMTP 客户，而负责接收邮件的 SMTP 进程就是 SMTP 服务器。

SMTP 用的是 TCP 连接，**端口号为 25**。直接把我们的信息从发送服务器到我们的接收服务器。**采用命令、相应**的交互方式。

![[Pasted image 20240525110357.png]]
常见命令：
![[Pasted image 20240525110613.png]]
发送数据：
![[Pasted image 20240525110958.png]]

终止连接：
![[Pasted image 20240525111038.png]]


![[Pasted image 20240525110748.png]]
## MIME 协议：
我们的 MIME 协议是对我们的原本的 SMTP 协议的优化，原本的 SMTP 协议，**只能够传输 7bit 的 ASCILL 码**，而我们的现在的 MIME 协议，允许我们传输其他的类型的数据。**视频，图片**。

这个时候我们的 MIME 就可以把我们的原本的数据**转换为 7 位 ASCILL 码数据**。，所以我们的 MIME 协议本质上可以认为是一个编码方式，也可以认为是一个**函数**。
![[Pasted image 20240525111601.png]]


## POP 3, IMAP
我们的 POP 3 和 IMAP 4 是一种邮件存储访问协议，也就是当我们邮件服务器读取软件的时候会发生什么。其中我们的 POP 3

我们的两种协议都有两种工作方式，**删除模式，保留模式**。

![[Pasted image 20240525111946.png]]


