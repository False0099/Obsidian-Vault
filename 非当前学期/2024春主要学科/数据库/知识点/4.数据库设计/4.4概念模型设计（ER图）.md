我们的概念结构设计，也就是把我们的**客户需求转换为我们的 ER 图**也因此，我们的概念结构，也可以叫做**概念模型**。

### 概念模型：
概念模型也就是把我们的**现实世界的信息**转换为一个事务之间的关系，使得我们的非计算机人员能够交换意见。同时也能够易于更改。也就是类似于我们的**ER 图**。

### ER 模型：
我们在使用我们的 SQL 的时候，我们的一个常见的问题就是，我们怎么去设计我们的每一个表格，这个时候，我们就需要用到我们的 ER 模型来解决。
**注意，我们在画 ER 模型的时候，要注意我们的关系数量对应关系要能够一一对应**。
ER 模型的关键是实体，我们凡是现实世界中可以区分的都叫做我们的实体。

#### 实体联系：
1. 一对一联系（1：1）
如果对于实体集 A 中的每一个物品，实体集 B 中最多只有一个实体与之对应，反之亦然，则称实体集 A 与实体集 B 之间构成了一对一联系，记为 1:1。

2. 一对多联系（1：n）
如果对于实体集 A 中的每一个物品，实体集 B 中有 n 个 hi 提与之对应的，反之，对于实体集 B 中的一个物品，在实体集 A 中最多只有一个与之对应，则称实体集 A 与实体集 B 之间构成了一对多练级，记为（1：n）

3. 多对多联系（m:n）
如果对于我们的实体集 A 中的每一个物品，我们的 B 中都有大于 1 个与之对应，反之，对于实体集 B 中的一个物品，在实体集 A 中也有若干个与之对应，则称实体集 A 与实体集 B 之间构成了多对多联系，记为 (m:n)

![[Pasted image 20240626132720.png]]


#### 多个实体之间的联系
![[Pasted image 20240626132856.png]]

#### 单个实体内部的联系：
在我们的同一个实体集之间也可以存在一对一，一对多，多对多的关系，例如：我们的领导与 ![[Pasted image 20240626133036.png]]

### ER 图简介：
我们的 ER 图提供了表示实体型，属性和联系的方法。我们一般用矩形表示我们的实体，椭圆形表示我们的属性，注意，我们的属性和我们的位置没有任何关系。联系通过我们的菱形表示。注意，**我们的联系也可以有自己的属性**。
![[Pasted image 20240626134027.png]]

## 扩展的 ER 模型
#### 基数约束：
我们的基数约束是对我们的实体之间的**一对一**，**一对多**，**多对多**联系的细化，我们的技术约束用于构造我们的**完整性约束**，便于我们的进一步细化，比如说我们的多具体是什么范围。我们的约束用一数对 (min, max)来表示，表示我们的某一个数字最小可以取多少，最大可以取多少。

我们于是就有一些特殊的约束：
1. min=1 的叫做强制参与约束，即被施加基数约束的实体型中的每个实体都要参与联系。（这一个部分**一定要设置为 not null**）例如我们的一个学生**必须有一个学生证**。
2. min=0 的叫做非强制参与约束，即被施加技术约束的是提醒中可以出现也可以不出现。

#### partof 联系：
我们的 partof 联系就是说，我们的一个实体是另一个实体的一部分。例如：我们的轮子是我们的汽车的一部分，我们就把这个叫做我们的 partof 联系。例如：
##### 非独占的 part-of
我们的非独占也就是说，当我们的一个实体小时之后，我们的另一个部分是否还能接着存在，如果我们的另一方消失了，我们的这一个实体依然可以存在，那么我们就认为这是一个非独占的 part-of。
![[Pasted image 20240626184814.png]]

##### 独占的 part-of 联系
我们的独占的联系也就是说：如果我们的整体实体呗破坏，我们的部分实体不能够独立存在，这个时候，我们就可以定义我们的弱实体，我们的**弱实体**，是指**一个实体的存在依赖于我们的其他实体**。
判断方法：如果不能从一个实体中找到可以作为主键的属性，那么这一个实体就叫做我们的**弱实体**。
![[Pasted image 20240626185113.png]]

![[Pasted image 20240626185213.png]]

我们的逻辑结构设计建立在我们有**确定的 ER 图**，也就是确定的概念结构。我们的逻辑结构设计是为了**将我们的 ER 图进行进一步的优化**。
## 实体与属性的划分原则
为了简化 E-R 图的设计，现实世界的事务能够作为属性对待的，**尽量作为属性对待**。

准则：
1. 作为属性，不需要再具有需要描述的性质。那么**属性是不可分的**数据项，不能包括其他属性
2. **属性不能与其他实体有联系**，即 E-R 图所表示的联系是实体间的联系。

![[Pasted image 20240626185953.png]]

如果我们的**病房和其他的没有联系，我们就作为一个属性**，如果我们还有其他的**联系**，我们就作为一个实体
![[Pasted image 20240626190137.png]]



## ER 图设计
我们设计出来的 ER 模型，是对我们数据库中表格与表格之间的关系之间的一个图形化表示。我们的 ER 图模型设计需要设计下面几个步骤：

第一个部分：确定我们的边界范围，也就是说我们这一个表格应该**管理的内容**和范围是什么.

第二步：确定我们的实体，我们的实体一般来说是我们的需求中的名字部分，例如：学生选课系统=学生+课+选，因此，我们就需要建立我们的学生表+课程表。

第三步：确定我们每一个实体中的属性（列）信息，我们需要注意，如果存在一个信息同时和我们的两个表格都有关系，例如我们的学生管理系统中，我们每一个学生的课程成绩。

我们的列应该是我们的**名词对应的具有的属性**，比如说我们的出生地，常常来说，这个名词应该是我们名词作形容词的时候对应的哪一个**被修饰的名词**。

第四步：确定我们不同表格之间的关系，这一步一般来说涉及到我们**确定主键，外键**。而我们的确定我们的关系一般是通过我们的**动词**。

第五步：确定我们的联系怎么表示（我们的一对一关系，多对多关系）。包括：
1. 我们是否可以取空值
2. 我们是否需要把我们的联系新开一个表格来表示

第六步：确定我们表格中实体的数据范围，约束条件（主键外键，相同数据之间的数据）等等。

想要确定我们的联系的性质，我们首先需要判定：
1. 关系的哪一边是多方，也就是我们的最大系数，最大系数大于 1，那么我们就是多值参与，如果最大系数等于 1，我们就是单值参数（终点）
2. 关系中的取值是否可以输 null，也就是我们的最小系数，最小系数等于 1，那么我们就是强制参与，我们取值不可以为 null，否则，我们就是可选参数，取值可以为 null。


确定我们是否任意一个 A 集合元素都存在一个联系，如果是，那么我们就需要相知这是我们的值不为空，否则，我们的取值可以设置为空。也可以用我们的 `min_cardinarity` 来进行表示。
如果我们的 `max_cardinarity` 大于 1，那么我们就需要通过一个表格来表示我们这一个**联系**

**注意，我们在进行考试的时候，要尽量采用规范的方法来表示**。详细方法见 PPT。



