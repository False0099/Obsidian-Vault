
# 拆分方法：
我们的范式规定了我们拆分的**终止条件**，而我们想要到达我们的终止条件，我们需要采用一定的**拆分方法**。
## 方法论：
1. 找全部属性集合
2. 找到我们的函数依赖关系集合
3. 证明函数依赖集合是等价的（利用函数依赖闭包，运用我们的 ARMSTRONG 规则）

分析一个表格的缺陷：


## 数据依赖：
数据依赖是同构一个关系中属性间值的相等于否体现出来的数据间的相互关系，是现实世界属性间的相互联系的抽象。例如：我们的一个老师固定上某一门或者某几门课。（**一个属性决定一组值**）

关系模式是对关系的描述，为了能够清楚地刻画出一个关系，它需要由五部分组成，（属性名，属性域，数据之间的依赖关系，）也可以简化为：（属性集，属性依赖关系）。

## 函数依赖：
如果我们对于任意的两行记录，我们都有：两行记录在 A 属性上的取值相等并且我们在 B 取值的属性上相同。也就是说，我们两个属性之间存在一个函数关系。我们就认为这两个关系存在一个**依赖关系**。（**一一对应**）

那么我们一个好的表格应该要满足：我们的主键不存在我们的对应的荣誉表示信息。并且我们的这个表上的所有信息只能够被我们的主键唯一标识。因此，我们应该选择我们的因变量作为我们的**候选键**。

注：
1. 函数依赖不是指某个或者某些势力，而是我们的所有的关系实例都要满足，也就是说不能只通过样例
2. 函数依赖的判别需要根据御医来确定，不能根据我们的样例来进行判断。
3. 如果我们有 X-》Y，Y-》X，则记为 X《-》Y
4. 若 X-》Y，则 X 称为这个函数依赖的决定属性集

## Armstrong 规则
1. 包含规则：
$X\geq Y,X\to Y$
1. 传递规则
$X\to Y,Y\to Z\implies X\to Z$
1. 推广规则
$X\to Y\implies XZ\to YZ$

合并规则：
$X\to Y\land X\to Z\implies X\land YZ$

分解规则：
$X\to YZ\implies X\to Y,X\to Z$

伪传递规则：
$X\to Y\land WY\to Z \implies XW\implies Z$

聚集规则：
$X\to YZ\land Z\to W\to X\to YZW$

## 函数依赖闭包
当我们给定一个函数依赖几个 F，我们定义它的闭包 $F^{+}$ 表示我们的任何的关系都存在于我们的闭包当中。也就是**我们能够从我们的 F 推导出的所有关系**。

## 函数依赖覆盖

#### 函数依赖找候选键：
第一步：将我们的属性分类为下面的三类属性：左侧树形，右侧属性，双侧属性。
第二步：我们先找到所有出现在右边的属性，然后找到所有出现在右边的属性，
第三步：找到我们只出现在我们的左侧的属性，这些属性**大概率**就是我们的候选键。
第四步：如果我们不满足我们的要求的时候，我们考虑找到我们的双部属性。

## 例题：
1. $F=\{a\to b,bc\to d,ac\to d\}$,求最小覆盖

1. $G=\{a\to ac,b\to abc,d\to abc\}$,求最小覆盖


## 第三范式分解算法：
第一步：我们求出给定函数依赖的最小覆盖
第二步：我们将我们的每一个最小依赖都去构造一个表格
第三步：我们检查所有的可能的候选键集合是否都被我们的函数依赖所覆盖了，如果是，我们不进行操作，否则，我们就把我们的元素添加进来。

# 范式规定
我们的范式相当于限定了我们的数据库分解的最终条件，最后我们判定我们是否仍然需要对于我们的表格进行分解，我们就需要同构我们的范式验证来进行处理。

## 主属性：
定义：我们的主属性就是一个表格的健的构成部分，但是本身不一定作为主键出现，**也就是我们的候选键中的单个元素**。在我们确定一个关系模式的键是什么，减与其他属性的关系是什么。由此确定函数依赖关系 F
## 非主属性：
定义：不是主属性的都是我们的非主属性。

## 第一范式：
我们的第一范式也就是说，我们不允许我们的表中套用一个表格，也就是说我们的表格中的都是原子化的。例如，我们的一个用户中存在这么一张表：姓名，部门，住址，其中我们的住址又有我们的国，省，市组成。这样的设计师不符合我们的第一范式的。
不能有**多值属性**，**内部结构**。
**所有的表格都需要满足我们的第一范式**。

## 第二范式：


## 第三范式：



作业一：$Head(T)=\{C,T,H,I,S,G\},f=\{CS\to G,C\to T,TH\to I,HI\to C,HS\to I\}$ 
1.求我们的第三范式分解, 并标记各个表的主键，要求保持我们的函数依赖。
第一步：找我们的最小覆盖：
$CS\to G,C\to T,TH\to I,HI\to C,HS\to I$
删除 $CS\to G$, $\{C\to T,TH\to I,HI\to C,HS\to I\}$，不能合并得到，我们去找我们的 $CS$ 的闭包，显然不包括必须包含
删除 $C\to T,\{CS\to G,TH\to I,HI\to C,HS\to I\}$,我们去找 $C$ 的闭包显然不包含所有，必须包含
删除 $TH\to I$, $\{CS\to G,C\to T,HI\to C,HS\to I\}$，我们求我们的 $TH$ 的闭包，显然无法求
删除 $HI\to C$, $\{CS\to G,C\to T,TH\to I,HS\to I\}$,显然也不能删。
删除 $\{HS\to I\},$

第二步：找到候选键：
作业二：
$Head(T)=\{a,b,c,d\},f=\{a\to c,c\to a,b\to ac,d\to ac\}$

1. 求出我们的最小覆盖
2. 求出我们的第三范式最小分解，并标记我们的主键

作业三：
$Head(T)=\{B,S,P,Q,I,D\},F=\{S\to D,I\to B,IS\to Q,B\to P\}$
第一步：找到我们的最小覆盖：
$IS\to Q,I\to BP,S\to D$

第二步：找到我们的候选键：
$IS$

第三步：找到我们的分解：
$\{IS\to Q\}\to \underline{IS}Q$, $\{I\to BP\}\to \underline{I}BP$, $\{S,D\}\to \underline{S}D$, 

第四步：检查我们的候选键是否被我们的某一个表格所包含，显然，我们的候选键 $IS$ 被我们的表格 1, $\{IS\to Q\}$ 所包含了，因此我们不需要再去新建其他的候选键。