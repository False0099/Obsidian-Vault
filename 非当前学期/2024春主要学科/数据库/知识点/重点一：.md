1. 我们的 O（表）是一个实体？还是一个联系？
也就是说，我们创建了一个 A 和 B 之间的联系表，请问我们的这个表算是一种实体，还是一种联系？

2. 求解关系代数表达式的对应方法：
第一步：确定题目定义的限制条件（Find all CUSTOMERS base in 'Kyoto'）就是我们哪些要相等。
第二步：根据我们的属性是我们的列（属性）（取值）还是我们的对应的那个表县官的。
第三步：在朴素 ER 图中标记限制条件为起始结点，(注意我们选择的起始结点，**这个选择和我们的题目有关**)
第四步：从题目中找我们需要的查询信息是什么，如果我们要某一个具体的列，我们就找到对应的表格是什么，如果我们要一个具体的表，我们就找到
第五步：在朴素 ER 图中标记需要的信息为结束点。
第六步：找到我们朴素 ER 图中我们的起始点到终点的路径是什么。其中我们的路径要求：1. 最短路
第七步：确定我们的中间节点后，我们标记我们经过的结点和我们的中间边。
第八步：把我们的路径转化内查询表达式，（其中边作为我们的 where 语句，我们的点作为我们的 select 语句）


例如：
1. 找到所有的在 kyoto 的顾客

![[Pasted image 20240312143724.png]]
![[Pasted image 20240312143751.png]]


2. 找到所有存储在 Dallas，销售价格大于 0.5 的商品。
![[Pasted image 20240312143952.png]]

3. Example2.7.5: suppose that we wish to determine those cities where we have either customers who have a discount of less than 10% or  agent who make a commission of less than 6%.

(CUSTOMERS where discnt<10)[city] ∪(AGENTS where percent<6)[city]

4.   Example2.7.3: 假设我们需要检索所有的代理对，他们都具有超过6%的佣金比例，并且都在同一个城市.

③PAIRS:=(L×M) where L.city=M.city and L.aid<M.aid（这里我们让我们的 id 不同的原因是因为我们要**去重**）

我们的连接运算可能存在的错误：
1. 我们的连接运算嵌套连接运算的时候，如果我们有多个可能的相同的值，这个时候，如果这个是我们不希望相等的，我们就需要**添加一个投影**，**只选择我们需要的元素**。（边运算边留下需要的东西）

代数运算相关技巧：
1. 正男则反，如果我们题目中要求我们的全部不在，我们就可以算出所有的，再去减去满足条件的即可。
eg: 查询全部没有在代理商 $a_{03}$ 处订购过商品的顾客的 $cid$ 值。

首先，我们本题的思路是，正男则反，用我们的所有**订购过商品**的顾客减去我们在 $a_{03}$ 处订购过的顾客的 $cid$ 值。因此，我们可能需要通过我们的 $o_{id}$ 来进行我们的全集，而不是通过我们的 $cid$ 作为我们的全集。


2. 集合去重：如果我们题目中要求我们再一个列上的多值，那么我们就需要要通过我们的一个下面的方式：
```
O where pid=p01 and O where pid=p01
```

也就是说，我们如果在一个列上有多值，我们就可以通过我们的集合运算来求出，但是我们的集合运算是进行在我们的表格上，而不是我们的 where 上。

**FOR all+名词-》除法**