我们的页框分配，在某种程度上，也就是我们的**内存分配**，我们的操作系统需要计算我们给我们的每一个**内存分配了多少的大小**。
## 驻留集
对于分页式的虚拟内存，在进程准备执行时，不需要也不可能把一个进程的所有页都读入主存。因此，操作系统必须决定读取多少页，即决定给特定的进程分配几个页框。**给一个进程分配的内存大小**就是这个进程的驻留集。需要考虑以下几点：
1) 分配给一个进程的页框越少，驻留在主存中的进程就越多，从而可提高 CPU 的利用率。
2) 若一个进程在主存中的页面过少，则尽管有局部性原理，缺页率仍相对较高。
3) 若分配的页框过多，则由于局部性原理，对该讲程的缺页率没有太明显的影响。

## 内存分配策略：
在请求分页系统中，可采取两种内存分配策略，即**固定和可变分配**策略。在进行置换时，也可采取两种策略，即**全局置换和局部**置换。于是可组合出下面三种适用的策略。

### 固定分配：
我们的固定分配，也就是给我们的一个程序分配的内存的**总大小是固定的**。我们不能够修改我们的内存的大小。

### 可变分配：
我们的可变分配，也就是给我们的一个程序分配的内存的**总大小是可变的**。我们可以在我们的进程运行的过程中去动态的申请我们的大小。

### 局部置换：
也就是说我们在发生缺页的情况下，我们应该从我们的什么位置去换我们的页？局部置换要求我们只能换**原本属于我们这一个程序的页**

### 全局置换：
我们的全局置换也就是说，如果我们发生缺页的时候，我们可以从我们的内存中**任意的换出我们的一块页框**，并且把这一个页框

(1)固定分配局部置换
为每个进程分配一定**数目**的物理块，在进程运行期间都**不改变**。所谓局部置换，是指如果进程在运行中发生缺页，则只能从分配给**该进程在内存的页面中选出一页换出，然后再调入一页**，以保证**分配给该进程的内存空间不变**。实现这种策略时，难以确定应为每个进程分配的物理块数目：太少会频繁出现缺页中断，太多又会降低 CPU 和其他资源的利用率。

(2)可变分配全局置换
先为每个进程分配一-定数目的物理块，在进程**运行期间可根据情况适当地增加或减少**。所谓全局置换，是指如果进程在运行中发生缺页，系统从**空闲物理块队列中取出一块分配给该进程，并将所缺页调入**。这种方法比固定分配局部置换更加灵活，可以动态增加进程的物理块，但也存在弊端，如它会盲目地给进程增加物理块，从而导致系统多道程序的并发能力下降。

 (3)可变分配局部置换
为**每个进程分配一定数目的物理块**，当某进程发生缺页时，只允许从**该进程在内存的页面中选出一页换出**，因此不会影响其他进程的运行。若进程在运行中频繁地发生缺页中断，则系统再为该进程分配若干物理块，直至该进程的缺页率趋于适当程度；反之，若进程在运行中的缺页率特别低，则可适当减少分配给该进程的物理块，但不能引起其缺页率的明显增加。这种方法在保证进程不会过多地调页的同时，也保持了系统的多道程序并发能力。当然它需要更复杂的实现，也需要更大的开销，但对比频繁地换入/换出所浪费的计算机资源，这种牺牲是值得的。

## 调入算法：
采用固定分配策略时，将系统中的空闲物理块分配给各个进程，可采用下述几种算法。
1)平均分配算法，将系统中所有可供分配的物理块平均分配给各个进程。
2)按比例分配算法，根据进程的大小按比例分配物理块。
3)优先权分配算法，为重要和紧迫的进程分配较多的物理块。通常采取的方法是把所有可
分配的物理块分成两部分：一部分按比例分配给各个进程；一部分则根据优先权分配。

## 调入时机
为确定系统将进程运行时所缺的页面调入内存的时机，可采取以下两种调页策略：
1)预调页策略。根据局部性原理，一次调入若干相邻的页会比一次调入一页更高效。但若调入的一批页面中的大多数都未被访问，则又是低效的。因此，需要采用以预测为基础的预调页策略，将那些预计在不久之后便会被访问的页面预先调入内存。但目前预调页的成功率仅约 50%。因此这种策略主要用于进程的首次调入，由程序员指出应先调入哪些页。

2)请求调页策略。进程在运行中需要访问的页面不在内存，便提出请求，由系统将其所需页面调入内存。由这种策略调入的页一定会被访问，且这种策略比较易于实现，因此目前的虚拟存储器大多采用此策略。其缺点是每次仅调入一页，增加了磁盘 I/O 开销。预调入实际上就是运行前的调入，请求调页实际上就是运行期间调入。

## 何处调入：
请求分页系统中的外存分为两部分：用于存放文件的文件区和用于存放对换页面的对换区。对换区采用连续分配方式，而文件区采用离散分配方式，因此对换区的磁盘 I/O 速度比文件区的更快。这样，当发生缺页请求时，系统从何处将缺页调入内存就分为三种情况：
1) 系统拥有足够的对换区空间。可以全部从对换区调入所需页面，以提高调页速度。为此，在进程运行前，需将与该进程有关的文件从文件区复制到对换区。
2) 系统缺少足够的对换区空间。凡是不会被修改的文件都直接从文件区调入；而当换出这些页面时，由于它们未被修改而不必再将它们换出。但对于那些可能被修改的部分，在将它们换出时须调到对换区，以后需要时再从对换区调入 (因为读比写的速度快)。
3) UNIX 方式。与进程有关的文件都放在文件区，因此未运行过的页面都应从文件区调入。曾经运行过但又被换出的页面，由于是放在对换区，因此在下次调入时应从对换区调入。
进程请求的共享页面若被其他进程调入内存，则无须再从对换区调入。