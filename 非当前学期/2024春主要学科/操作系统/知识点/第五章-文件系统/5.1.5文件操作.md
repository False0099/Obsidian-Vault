我们的文件操作应该实现我们的下面的几个最基本的功能：
1. 创建文件
2. 写文件
3. 读文件
4. 重新定位文件
5. 删除文件
6. 截断文件（允许文件所有属性不变，）

### 文件打开：
第一步：根据我们的**文件存放路径**找到对应的目录文件，从目录中找到对应的**文件名对应的目录项**。并检查我们的用户是否具有对应的操作权限。

第二步：将我们**对应的目录项**复制到内存中的**打开文件表**，并将对应的表目编号返还给用户，之后用户**使用打开文件表的编号**来指明要操作的文件


![[Pasted image 20240627111858.png]]


**注意，如果我们的一整程序正在我们的系统打开文件表，我们就不能删除我们的这一个文件**。

## 关闭文件：
第一步：当我们的进程选择关闭文件时，我们先去将**进程打开表中文件相关的数据删除**。
第二步：我们回收系统分配给我们的程序的对应的内存资源，包括我们的内存
第三步：系统打开表对应的计数器-1，如果我们的系统打开表的值位 0，那么我们就回收内容
![[Pasted image 20240627112517.png]]

## 读文件
第一步：打开文件
第二步：我们通过调用我们的 read 函数，并且指明我们的文件是多少，我们的内容是多少，要放在什么位置，我们既可以完成我们的对于一个文件的读入。
![[Pasted image 20240627112617.png]]

## 写文件：
第一步：打开文件
第二步：我们调用系统当中的 write 函数，指明是哪一个文件，写入到我们的哪一个位置，即可完成我们的文件的写。
![[Pasted image 20240627112701.png]]