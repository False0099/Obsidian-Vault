类似于内存分页，磁盘中的存储单元也会被分割为一个一个的“块”。
![[Pasted image 20240617210631.png]]

## 分配方式：
1. 连续分配：
这一种分配方式要求我们每个文件在磁盘上占有**一组连续的块**，磁盘地址定义了磁盘上的一个线性序列，这一种排序使得我们作业访问磁盘时需要的。这个时候我们构造我们**逻辑地址**到我们的**物理地址**的映射，就可以通过我们的映射表，我们需要能够存储我们的文件的**起始块号**，
![[Pasted image 20240617201617.png]]

但是我们这一种方式的不足在于，我们如果删除了一个文件后，可能会产生我们的磁盘空洞，而我们的移动磁盘的代价有很大，于是我们就需要一个空闲磁盘记录表：
![[Pasted image 20240617201657.png]]



2. 链接分配：
链接分配是一种采用离散分配的方式。它消除了磁盘的外部碎片，提高了磁盘的利用率。可以动态地为文件分配盘块，因此无须事先知道文件的大小。我们存储我们的文件的**起始此盘块号，下一个此盘块号**，
![[Pasted image 20240617201734.png]]
![[Pasted image 20240617210251.png]]

此外，对文件的插入、删除和修改也非常方便。链接分配又可分为隐式链接和显式链按两种形式。
1. 隐式链接：我们的隐式链接也就是我们为我们的磁盘中的每一个表象都去预先分配一个指针，我们的文件管理中，只需要存储我们的**起始地址，终止地址**即可。
![[Pasted image 20240617211411.png]]
2. 显示连接：显示连接，是吧我们的所有的指针和对应的父节点，都取出来，存储为一个表格，称为文件分配表（FAT）。每个表项中存放连接指针，即下一个盘块号。
![[Pasted image 20240617211649.png]]

同时，如果我们希望能够**优化我们读取内容的过程**，我们可以把我们的原来的表格中创建一个**FAT**表，存储了每一个**磁盘块的下一个块号**。
![[Pasted image 20240617201830.png]]


#### 工作流程：
第一步：我们的用户给出我们希望访问的逻辑块好 $i$ 的，操作系统找到该未见对应的目录项（FCB）
第二步：在目录中找到我们的起始块号，如果 $i>0$,则查询文件分配表中的文件分配表 FAT，往后找到 i 号逻辑块号，逻辑块号转换为对应的物理块号，**不需要读文件操作**。

遗憾的是，我们这一种方法，不能够管理我们的很大的磁盘，我们需要换一个其他的方法
3. 索引分配：
我们的思路是，存储我们的每一个文件对应的索引表，然后通过这一个索引表来记录我们的文件内部各个逻辑块对应的物理块号是多少。索引表存放的磁盘块称为**索引块**，文件数据存放的磁盘块称为**数据块**。
![[Pasted image 20240617212433.png]]

当我们的**索引块**太大时，我们可以通过我们的连接方案，来处理我们的大文件，如下所示：
![[Pasted image 20240617212816.png]]

### 多层索引：
我们可以建立多层索引，让我们的第一层索引块指向我们的第二层的索引块的地址，我们的第二层的索引块的地址指向我们的最终的数据块。采用了**类似于树形结构**。
![[Pasted image 20240617213417.png]]


### 混合索引：
![[Pasted image 20240617214123.png]]
