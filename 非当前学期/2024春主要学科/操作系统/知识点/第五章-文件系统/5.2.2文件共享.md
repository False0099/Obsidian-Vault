我们的文件共享的前提是，我们在文件中提供了我们的**访问权限**，我们的访问权限包括我们的读写可执行追加等等多种种类。

多个用户共享同一个文件，意味着系统中只有“一份”文件数据。并且只要某个用户修改了该文件的数据，其他用户也可以看到文件数据的变化。如果是多个用户都“复制”了同一个文件，那么系统中会有“好几份”文件数据。其中一个用户修改了自己的那份文件数据，对其他用户的文件数据并 $\aleph$ 没有影响。
## 硬链接
![[Pasted image 20240617222201.png]]
硬连接指通过索引节点来进行连接。在 Linux 的文件系统中，保存在磁盘分区中的文件**不管是什么类型都给它分配一个编号**，称为索引节点号(Inode Index)。在 Linux 中，多个文件名指向同一索引节点是存在的。比如：A 是 B 的硬链接（A 和 B 都是文件名），则 A 的目录项中的 inode 节点号与 B 的目录项中的 inode 节点号相同，即一个 inode 节点对应两个不同的文件名，两个文件名指向同一个文件，A 和 B 对文件系统来说是完全平等的。删除其中任何一个都不会影响另外一个的访问。

硬连接的作用是允许**一个文件拥有多个有效路径名**，这样用户就可以建立硬连接到重要文件，以防止“误删”的功能。其原因如上所述，因为对应该目录的索引节点有一个以上的连接。只删除一个连接并不影响索引节点本身和其它的连接，只有当最后一个连接被删除后，文件的数据块及目录的连接才会被释放。也就是说，文件真正删除的条件是与之相关的所有硬连接文件均被删除。


我们的硬链接，也就是**基于索引节点的共享方式**，我们对于每一个文件都去建立一个索引节点，我们每一次如果一个用户想要访问我们的文件，我们都回去创建一个**这个用户目录下的**索引**指针**，来找到我们的文件。

同时，索引结点中设置一个链接计数变量 count, 用于表示链接到本索引结点上的用户目录项数。若 count=2, 说明此时有两个用户目录项链接到该索引结点上，或者说是有两个用户在共享此文件。若某个用户决定“删除”该文件，则只是要把用户目录中与该文件对应的目录项删除，且索引结点的 Count 值减 1。

我们删除**源文件**的时候，我们的所有的对应的链接也都会被删除。(也就是说，我们的**硬链接等价于复制文件**，)

## 软连接：
我们的软连接，也就是说，我们双键的指针指向的索引并不是我们的直接地址，而是我们地址的一个索引。（我们的软连接等价于**创建快捷方式**）
![[Pasted image 20240617222246.png]]

![[Pasted image 20240617222405.png]]

而我们再**删除源文件**的时候，我们的软连接会失效，但是不会被**删除**。