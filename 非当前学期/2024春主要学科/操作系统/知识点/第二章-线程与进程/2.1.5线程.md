引入进程的目的是更好地使多道程序并发执行，提高资源利用率和系统吞吐量；而引入线程的目的则是减小程序在并发执行时所付出的时空开销，提高操作系统的并发性能。

为了让我们的**CPU**更好的利用，我们引入了线程，线程能够帮助我们提高我们的程序的并行。在使用了**线程**后，我们进程只是我们的**资源分配的基本单位**，我们的**调度的基本单位**变成了我们的线程。

## 变化点：
1. 资源的调度与分配：
在引入了线程后，我们的**资源分配的基本单位**仍然是进程，但是我们的**调度的基本单位**变成了我们的线程，也就是说，我们的调度算法适用于更小的线程当中。

2. 更好的并发性
传统进程中，只能够**进程之间并发**，在引入线程之后，各个线程之间也能够实现并发。

3. 系统开销方面：
传统的进程中，需要**频繁的切换进程**，需要切换进程的运行环境，系统开销很大（因为我们切换环境需要：**切换上下文**，**进行系统调用**，**切换进程空间**等等）。线程之间并发，如果是同一进程内的线程切换则不需要切换进程，系统开销小


## 属性：
1. 线程是处理机的**调度单位**。
2. 多 CPU 计算机中，各个线程可以**占用不同的 CPU**
3. 每个线程都有一个线程 ID，**线程控制块**
4. 线程也有**阻塞，就绪，运行**三种基本状态。
5. 线程**几乎不用有系统资源**
6. 同一进程的不同线程**共享进程资源**
7. 由于**共享内存地址空间**，同一进程中的线程通信无需干预
![[Pasted image 20240423222113.png]]

## 线程的实现方式：
线程的实现可以分为两类：用户级线程，内核级线程。内核级线程又称内核支持的线程。

(1)用户级线程（ULT）
**用户线程**指不需要内核支持而在用户程序中实现的线程，其不依赖于操作系统核心，应用进程利用线程库提供创建、同步、调度和管理线程的函数来控制用户线程。**不需要用户态/核心态切换**，速度快，操作系统**内核不知道多线程的存在**，因此**一个线程阻塞将使得整个进程（包括它的所有线程）阻塞**。由于这里的处理器时间片分配是以进程为基本单位，所以每个线程执行的时间相对减少。

**用户线程运行在一个中间系统上面**目前中间系统实现的方式有两种，即运行时系统（Runtime System）和内核控制线程。“运行时系统”实质上是用于管理和控制线程的函数集合，包括创建、撤销、线程的同步和通信的函数以及调度的函数。这些函数都驻留在用户空间作为用户线程和内核之间的接口。用户线程不能使用系统调用，而是当线程需要系统资源时，将请求传送给运行时，由后者通过相应的系统调用来获取系统资源。内核控制线程：系统在分给进程几个轻型进程（LWP），LWP 可以通过系统调用来获得内核提供的服务，而进程中的用户线程可通过复用来关联到 LWP，从而得到内核的服务

（2）内核级线程
由操作系统**内核创建和撤销**。内核维护进程及线程的上下文信息以及线程切换。一个内核线程由于 I/O 操作而阻塞，**不会影响其它线程的运行**。Windows NT 和2000/XP 支持内核线程。

![[Pasted image 20240306172356.png]]
