## 调度算法：
我们的调度算法影响的是我们的**等待时间**。

### FCFS 调度算法
#### 思想：
主要从“公平”的角度考虑 (类似于我们生活中排队买东西的例子)

#### 规则：
按照作业到来的先后顺序提供服务。

#### 抢占性：
非抢占性的算法

#### 用于作业/进程调度
用于作业调度时，考虑的是哪个作业先到达后备队列；用
于进程调度时，考虑的是哪个进程先到达就绪队列

#### 优缺点：
优点：公平、算法实现简单
缺点：排在长作业 (进程)后面的短作业需要等待很长时间，带权周转时间很大，对短作业来说用户体验不好。即， FCFS 算法对长作业有利，对短作业不利 (Eg: 排队买奶茶...)
#### 是否导致饥饿？

不会

![[Pasted image 20240429185715.png]]

### SJF 调度算法（最短优先）
#### 思想：
追求最少的平均等待时间，最少的平均周转时间、最少的
平均平均带权周转时间

#### 规则：
最短的作业/进程优先得到服务 (所谓“最短”, 是指要求服务时间最短)

#### 抢占性：
默认非抢占性的算法，但也存在对应的抢占性的算法

#### 用于作业/进程调度
即可用于作业调度，也可用于进程调度。用于进程调度时
称为“短进程优先 (SPF, Shortest Process First)算法”

#### 优缺点：
优点：“最短的”平均等待时间、平均周转时间
缺点：不公平。对短作业有利，对长作业不利。可能产生饥饿现象。另外，作业/进程的运行时间是由用户提供的，并不一定真实，不一定能做到真正的短作业优先
#### 是否导致饥饿？
会

![[Pasted image 20240429190305.png]]

![[Pasted image 20240429190453.png]]

![[Pasted image 20240429190507.png]]

### 高相应比优先调度：
#### 思想：
要综合考虑作业/进程的等待时间和要求服务的时间

#### 规则：
在每次调度时先计算各个作业/进程的响应比，选择响应比最高的作业/进程为其服务。其中我们的**响应比=(等待时间+要求服务时间）/要求服务时间**。

#### 抢占性：
默认非抢占性的算法

#### 用于作业/进程调度
即可用于作业调度，也可用于进程调度。用于进程调度时
称为“短进程优先 (SPF, Shortest Process First)算法”

#### 优缺点：
综合考虑了等待时间和运行时间 (要求服务时间)。等待时间相同时，要求服务时间短的优先 (SJF 的优点) 要求服务时间相同时，等待时间长的优先 (FCFS 的优点) 对于长作业来说，随着等待时间越来越久，其响应比也会越来越大，从而避免了长作业饥饿的问题
#### 是否导致饥饿？
不会

![[Pasted image 20240429191750.png]]




注：这几种算法主要关心对用户的公平性、平均周转时间、平均等待时间等评价系统整体性能的指标，但是不关心“响应时间”,也并不区分任务的紧急程度，因此对于用户来说，**交互性很糟糕**。因此这三种算法一般适合用于早期的批处理系统，当然，FCFS 算法也常结合其他的算法使用，在现在也扮演着很重要的角色。而适合用于交互式系统的调度算法将在下个小节介绍...

### 时间片轮转算法（响应时间优先）

#### 思想：
公平地、轮流地为各个进程服务，让每个进程在一定时间
间隔内都可以得到响应

#### 规则：
按照各进程到达就绪队列的顺序，轮流让各个进程执行一个时间片(如 100ms)。若进程未在一个时间片内执行完，则剥夺处理机，将进程重新放到就绪队列队尾重新排队。

#### 抢占性：
是。若进程未能在时间片内运行完，将被强行剥夺处理机使用权，因此时间片轮转调度算法属于抢占式的算法。由时钟装置发出时钟中断来通知 CPU 时间片已到。

#### 用于作业/进程调度
用于进程调度 (只有作业放入内存建立了相应的进程后，
才能被分配处理机时间片)

#### 优缺点：
优点：公平；响应快，适用于分时操作系统；
缺点：由于高频率的进程切换，因此有一定开销；不区分
任务的紧急程度。

#### 是否导致饥饿？
不会

![[Pasted image 20240429192949.png]]

![[Pasted image 20240429193003.png]]

**时间片过大，会退化为先来先服务调度**

### 优先级调度算法（优先队列）
#### 思想：
随着计算机的发展，特别是实时操作系统的出现，越来越
多的应用场景需要根据任务的紧急程度来决定处理顺序

#### 规则：
每个作业/进程有各自的优先级，调度时选择优先级最高的作业/进程。

#### 抢占性：
抢占式、非抢占式都有。做题时的区别在于：非抢占式只需在进程主动放弃处理桃时进行调度即可，而抢占式还需在就绪队列变化时，检查是否会发生抢占。

#### 用于作业/进程调度
既可用于作业调度，也可用于进程调度。甚至，还会用于在之后会学习的 I/O 调度中

#### 优缺点：
优点：用优先级区分紧急程度、重要程度，适用于实时操
作系统。可灵活地调整对各种作业/进程的偏好程度。
缺点：若源源不断地有高优先级进程到来，则可能导致饥饿
#### 是否导致饥饿？
会

![[Pasted image 20240429193450.png]]

![[Pasted image 20240429193509.png]]

![[Pasted image 20240429193820.png]]


### 多级队列调度算法
![[Pasted image 20240429194515.png]]



### 多级反馈队列调度算法
#### 思想：
对其他调度算法的折中权衡

#### 规则：
1. 设置多级就绪队列，各级队列优先级从高到低，时间片从小到大
2. 新进程到达时先进入第 1 级队列，按 FCFS 原则排队等待被分配时间片，若用完时间片进程还未结束，则进程进入下一级队列队尾。如果此时已经是在最下级的队列，则重新放回该队列队尾
3. 只有第 k 级队列为空时，才会为 k+1 级队头的进程分配时间片

#### 抢占性：
抢占式的算法。在 k 级队列的进程运行过程中，若更上级的队列(1~k-1 级)中进入了一个新进程，则由于新进程处于优先级更高的队列中，因此新进程会抢占处理机，原来运行的进程放回 k 级队列队尾。

#### 用于作业/进程调度
仅用于进程调度。

#### 优缺点：
对各类型进程相对公平 (FCFS 的优点); 每个新到达的进程都可以很快就得到响应 (RR 的优点); 短进程只用较少的时间就可完成 (SPF 的优点）;不必实现估计进程的运行时间 (避免用户作假); 可灵活地调整对各类进程的偏好程度，比如 CPU 密集型进程、I/O 密集型进程 (拓展：可以将因 I/O 而阻塞的进程重新放回原队列，这样1/0 型进程就可以保持较高优先级)
#### 是否导致饥饿？
会


**类似于我们的滑滑梯**
![[Pasted image 20240429194229.png]] 

