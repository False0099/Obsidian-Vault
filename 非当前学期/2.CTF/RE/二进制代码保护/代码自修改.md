## 定义
另一种常见的抵御静态分析的手段是代码自修改 (Self-
1 Modifying Code, SMC)。SMC 就是程序在执行过程中，将自己的可执行代码进行修改并执行的手段，能让真正执行的代码在静态分析中不出现，以此增加逆向的难度。SMC 在 CTF 中极为常见，如壳类软件广泛使用。一般，待 SMC 的代码在 IDA 等工具中会被识别为数据，但会出现将该数据地址当作函数指针并进行函数调用的操作，

## 简单自修改方法
第一步：我们首先用一个指针指向我们的函数的对应位置，我们记作 $c_{1}$
第二步：我们对我们的函数指针从开头到末尾，每一个都用我们的加密算法进行加密，得到一个结果，是我们的加密后的函数
第三步：如果我们要使用我们的对应函数，那么我们就可以通过我们的解密函数，对我们的 $c_{1}$ 进行解密后，再去运行，就实现了我们的解密。
![[Pasted image 20231217190202.png]]
我们执行上述程序后，我们对我们的 abc 函数到 d 函数之间的数据都进行了我们的加密，
![[Pasted image 20231217190326.png]]
此时，如果我们想要正常的执行我们的程序，我们就要把我们的对应的值改成我们的修改后的数据，然后再去进行即可。

## 解决方案
对于这种，我们有两种方法：
这种情况也存在两种基本的解决方案：
1. 静态分析 SMC 代码的自修,改流程，自行实现该 SMC 过程，并将代码 patch 为真正执行的代码，即可继续进行静态分析； （见上）
2. 使用动态分析的方法，在代码已被解密完毕的位置设置断点，然后使用调试器跟踪真正执行的代码，或者 dump 已经解密完毕的代码，交给 IDA 进行静态分析。



